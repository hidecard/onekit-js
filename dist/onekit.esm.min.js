function t(t,e="Unknown"){console.error(`OneKit Error [${e}]:`,t);const n=new CustomEvent("onekit-error",{detail:{error:t,context:e},bubbles:!0,cancelable:!0});return document.dispatchEvent(n),null}let e={ALLOWED_TAGS:["div","span","p","h1","h2","h3","h4","h5","h6","ul","ol","li","a","img","br","strong","em","b","i","table","thead","tbody","tr","th","td","input","button","form","label","select","option","textarea"],ALLOWED_ATTRIBUTES:["id","class","style","href","src","alt","title","type","name","value","placeholder","disabled","checked","selected","width","height","colspan","rowspan","data-*"],enableSanitization:!0,enableValidation:!0};function n(t){if(!e.enableSanitization)return t;const n=document.createElement("div");n.innerHTML=t;const s=t=>{if(t.nodeType===Node.ELEMENT_NODE){const n=t,i=n.tagName.toLowerCase();if(!e.ALLOWED_TAGS.includes(i))return void n.remove();const o=Array.from(n.attributes);for(const t of o){const s=t.name.toLowerCase(),i=t.value,o=[/^on\w+$/i,/^javascript:/i,/^vbscript:/i,/^data:/i,/expression\s*\(/i,/eval\s*\(/i,/Function\s*\(/i].some(t=>t.test(s)||t.test(i));e.ALLOWED_ATTRIBUTES.some(t=>t.endsWith("*")?s.startsWith(t.slice(0,-1)):s===t)&&!o||n.removeAttribute(t.name)}const r=Array.from(n.childNodes);for(const t of r)s(t)}else if(t.nodeType===Node.TEXT_NODE){const e=t.textContent||"";[/javascript:/i,/vbscript:/i,/data:/i,/on\w+\s*=/i].some(t=>t.test(e))&&(t.textContent=e.replace(/javascript:|vbscript:|data:|on\w+=/gi,""))}};return s(n),n.innerHTML}function s(t){if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t);if(t instanceof RegExp)return new RegExp(t);if("function"==typeof t)return t;if(Array.isArray(t))return t.map(t=>s(t));const e={};for(const n in t)t.hasOwnProperty(n)&&(e[n]=s(t[n]));return e}function i(t){if(!e.enableValidation)return!0;return!["__proto__","constructor","prototype","toString","valueOf","hasOwnProperty","isPrototypeOf"].includes(t)&&"string"==typeof t&&t.length>0}class o{elements=[];static _cache=new Map;constructor(t){if(t)if(t instanceof Element)this.elements.push(t);else{if("string"==typeof t){if(!function(t){return!e.enableValidation||![/javascript:/i,/vbscript:/i,/data:/i,/expression\s*\(/i,/on\w+\s*=/i].some(e=>e.test(t))}(t))return void console.error("OneKit: Invalid selector - potential security risk");if("<"===t.charAt(0)&&">"===t.charAt(t.length-1)){const e=n(t),s=document.createElement("div");s.innerHTML=e;for(let t=0;t<s.childNodes.length;t++)this.elements.push(s.childNodes[t]);return}const s=document.querySelectorAll(t);for(let t=0;t<s.length;t++)this.elements.push(s[t]);return}if(t instanceof NodeList)for(let e=0;e<t.length;e++)this.elements.push(t[e]);else t instanceof o?this.elements=[...t.elements]:Array.isArray(t)&&(this.elements=[...t])}}first(){return this.elements.length>0?new o(this.elements[0]):new o}last(){return this.elements.length>0?new o(this.elements[this.elements.length-1]):new o}each(t){for(let e=0;e<this.elements.length;e++)t.call(this.elements[e],e,this.elements[e]);return this}find(t){const e=[];return this.each(function(){const n=this.querySelectorAll(t);for(let t=0;t<n.length;t++)e.push(n[t])}),new o(e)}class(t){return this.each(function(){this.classList?this.classList.add(t):this.className+=" "+t})}unclass(t){return this.each(function(){this.classList?this.classList.remove(t):this.className=this.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")})}toggleClass(t){return this.each(function(){if(this.classList)this.classList.toggle(t);else{const e=this.className.split(" "),n=e.indexOf(t);n>=0?e.splice(n,1):e.push(t),this.className=e.join(" ")}})}html(t){return void 0===t?this.elements.length>0?this.elements[0].innerHTML:null:this.each(function(){this.innerHTML=n(t)})}text(t){return void 0===t?this.elements.length>0?this.elements[0].textContent:null:this.each(function(){this.textContent=t})}attr(t,e){return"object"==typeof t?this.each(function(){for(const e in t)this.setAttribute(e,t[e])}):void 0===e?this.elements.length>0&&this.elements[0].getAttribute(t)||"":this.each(function(){this.setAttribute(t,e)})}unattr(t){return this.each(function(){this.removeAttribute(t)})}css(t,e){if("object"==typeof t)return this.each(function(){const e=this;for(const n in t)e.style[n]=t[n]});if(void 0===e){if(this.elements.length>0){return window.getComputedStyle(this.elements[0]).getPropertyValue(t)}return null}return this.each(function(){this.style[t]=e})}show(){return this.each(function(){this.style.display=""})}hide(){return this.each(function(){this.style.display="none"})}toggle(){return this.each(function(){this.style.display="none"===this.style.display?"":"none"})}clone(){const t=[];return this.each(function(){t.push(this.cloneNode(!0))}),new o(t)}parent(){return this.elements.length>0?new o(this.elements[0].parentNode):new o}kids(t){const e=[];return this.each(function(){const n=t?this.querySelectorAll(t):this.children;for(let t=0;t<n.length;t++)e.push(n[t])}),new o(e)}sibs(t){const e=[];return this.each(function(){if(this.parentNode){const n=this.parentNode.children;for(let s=0;s<n.length;s++)n[s]===this||t&&!n[s].matches?.(t)||e.push(n[s])}}),new o(e)}append(t){return this.each(function(){if("string"==typeof t){const e=n(t);this.insertAdjacentHTML("beforeend",e)}else if(t instanceof Element)this.appendChild(t);else if(t instanceof o)for(let e=0;e<t.elements.length;e++)this.appendChild(t.elements[e])})}prepend(t){return this.each(function(){if("string"==typeof t){const e=n(t);this.insertAdjacentHTML("afterbegin",e)}else if(t instanceof Element)this.insertBefore(t,this.firstChild);else if(t instanceof o)for(let e=t.elements.length-1;e>=0;e--)this.insertBefore(t.elements[e],this.firstChild)})}remove(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})}on(t,e,n){return"function"==typeof e&&(n=e,e=void 0),this.each(function(){e&&n?this.addEventListener(t,function(t){t.target&&t.target.matches?.(e)&&n.call(t.target,t)}):n&&this.addEventListener(t,n)})}off(t,e){return this.each(function(){this.removeEventListener(t,e)})}click(t){return this.on("click",t)}hover(t,e){return this.on("mouseenter",t).on("mouseleave",e)}focus(t){return this.on("focus",t)}fade_in(t=400){return new Promise(e=>{this.each(function(){const n=this;n.style.opacity="0",n.style.display="";const s=performance.now();requestAnimationFrame(function i(o){let r=(o-s)/t;r>1&&(r=1),n.style.opacity=r.toString(),r<1?requestAnimationFrame(i):e(n)})})})}fade_out(t=400){return new Promise(e=>{this.each(function(){const n=this,s=parseFloat(window.getComputedStyle(n).opacity),i=performance.now();requestAnimationFrame(function o(r){let a=(r-i)/t;a>1&&(a=1),n.style.opacity=(s*(1-a)).toString(),a<1?requestAnimationFrame(o):(n.style.display="none",e(n))})})})}slide_up(t=400){return new Promise(e=>{this.each(function(){const n=this,s=n.scrollHeight;n.style.height=s+"px",n.style.overflow="hidden",n.style.transition=`height ${t}ms`,n.offsetHeight,n.style.height="0px",setTimeout(()=>{n.style.display="none",n.style.height="",n.style.overflow="",n.style.transition="",e(n)},t)})})}slide_down(t=400){return new Promise(e=>{this.each(function(){const n=this;n.style.display="";const s=n.scrollHeight;n.style.height="0px",n.style.overflow="hidden",n.style.transition=`height ${t}ms`,n.offsetHeight,n.style.height=s+"px",setTimeout(()=>{n.style.height="",n.style.overflow="",n.style.transition="",e(n)},t)})})}animate(t,e=400){return new Promise(n=>{this.each(function(){const s=this,i={},o={};for(const e in t){const n=parseFloat(window.getComputedStyle(s)[e])||0;i[e]=n,o[e]=parseFloat(t[e])-n}const r=performance.now();requestAnimationFrame(function a(l){let c=(l-r)/e;c>1&&(c=1);for(const e in t)s.style[e]=i[e]+o[e]*c+("string"==typeof t[e]&&t[e].includes("px")?"px":"");c<1?requestAnimationFrame(a):n(s)})})})}move(t,e,n=300){return new Promise(s=>{this.each(function(){const i=this;i.style.transition=`transform ${n}ms ease-out`,i.style.transform=`translate3d(${t}px, ${e}px, 0)`;const o=()=>{i.removeEventListener("transitionend",o),s(i)};i.addEventListener("transitionend",o)})})}form_data(){if(0===this.elements.length)return{};const t=this.elements[0];if("FORM"!==t.tagName)return{};const e={};return t.querySelectorAll("input, select, textarea").forEach(t=>{const n=t;n.name&&!n.disabled&&("checkbox"===n.type||"radio"===n.type?n.checked&&(void 0===e[n.name]?e[n.name]=n.value:Array.isArray(e[n.name])?e[n.name].push(n.value):e[n.name]=[e[n.name],n.value]):"file"!==n.type&&(e[n.name]=n.value))}),e}reset(){return this.each(function(){"FORM"===this.tagName&&this.reset()})}isVisible(){if(0===this.elements.length)return!1;const t=this.elements[0],e=window.getComputedStyle(t);return"none"!==e.display&&"hidden"!==e.visibility&&"0"!==e.opacity}inViewport(t=0){if(0===this.elements.length)return!1;const e=this.elements[0].getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,s=window.innerWidth||document.documentElement.clientWidth,i=e.top<=n*(1-t)&&e.top+e.height>=n*t,o=e.left<=s*(1-t)&&e.left+e.width>=s*t;return i&&o}getDimensions(){if(0===this.elements.length)return{width:0,height:0,innerWidth:0,innerHeight:0,top:0,left:0};const t=this.elements[0];return{width:t.offsetWidth,height:t.offsetHeight,innerWidth:t.clientWidth,innerHeight:t.clientHeight,top:t.offsetTop,left:t.offsetLeft}}log(){return this.elements.length>0&&console.log(this.elements[0]),this}info(){return this.elements.length>0&&console.log({element:this.elements[0],tagName:this.elements[0].tagName,id:this.elements[0].id,className:this.elements[0].className,children:this.elements[0].children.length}),this}}function r(t){return new o(t)}const a={};r.module=function(t,e){a[t]=e},o._cache=new Map,o.clearCache=function(){o._cache.clear()};["find","html","text","attr","css","append","prepend","remove","on","off","fade_in","fade_out","slide_up","slide_down","animate","move"].forEach(e=>{if(o.prototype[e]){const s=o.prototype[e];o.prototype[e]=(n=s,function(...e){try{return n.apply(this,e)}catch(e){return t(e,n.name),this}})}var n});["component","reactive","vdom","animation","gesture","api","utils","form","plugin","a11y","theme","router","storage","crypto","physics","timeline","scene3d","csp","cli","stories","wasm"].forEach(t=>{a[t]&&a[t]()}),window.addEventListener("unhandledrejection",function(e){t(e.reason,"Unhandled Promise Rejection"),e.preventDefault()}),window.addEventListener("error",function(e){t(e.error,"JavaScript Error")}),"undefined"!=typeof window&&(window.ok=r,window.OneKit=o);class l{services=new Map;instances=new Map;register(t,e,n=[],s=!0){this.services.set(t,{factory:e,dependencies:n,singleton:s})}resolve(t){const e=this.services.get(t);if(!e)throw new Error(`Service "${t}" not registered`);if(e.singleton&&this.instances.has(t))return this.instances.get(t).instance;const n=e.dependencies?.map(t=>this.resolve(t))||[],s=e.factory(...n);return e.singleton&&this.instances.set(t,{instance:s,singleton:!0}),s}has(t){return this.services.has(t)}clear(){this.services.clear(),this.instances.clear()}}const c=new l;const h=new class{plugins=new Map;installed=new Set;register(t,e){if(this.plugins.has(t.name)&&console.warn(`Plugin "${t.name}" is already registered. Overwriting...`),this.plugins.set(t.name,t),!this.installed.has(t.name))try{t.install({},e),this.installed.add(t.name)}catch(e){console.error(`Failed to install plugin "${t.name}":`,e)}}unregister(t){const e=this.plugins.get(t);if(e&&e.uninstall)try{e.uninstall({}),this.installed.delete(t)}catch(e){console.error(`Failed to uninstall plugin "${t}":`,e)}this.plugins.delete(t)}get(t){return this.plugins.get(t)}list(){return Array.from(this.plugins.values())}clear(){for(const[t,e]of this.plugins)if(e.uninstall&&this.installed.has(t))try{e.uninstall({})}catch(e){console.error(`Failed to uninstall plugin "${t}":`,e)}this.plugins.clear(),this.installed.clear()}},u={},f=new Map;function d(t,e){u[t]=e}function m(t,e={},i={}){if(!u[t])return console.error(`Component "${t}" not found`),null;const o=u[t],r={name:t,props:{...o.props||{},...e},slots:i,state:o.data?s(o.data()):{},element:null,mounted:!1,listeners:[],update:function(){}};o.methods&&Object.keys(o.methods).forEach(t=>{r[t]=function(...e){return o.methods[t].call(r,...e)}}),r.update=function(){if(this.element){o.beforeUpdate&&o.beforeUpdate.call(this);let t="";if(o.template?(t=o.template.replace(/\{\{([^}]+)\}\}/g,(t,e)=>{const n=e.trim().split(".");let s=this.state;n[0]in this.props&&(s=this.props);for(const t of n)s=s&&s[t];return void 0!==s?s:""}),t=t.replace(/<slot><\/slot>/gi,this.slots.default||""),t=t.replace(/<slot name="([^"]+)"><\/slot>/gi,(t,e)=>this.slots[e]||"")):o.render&&(t=o.render.call(this)),t){const e=n(t),s=document.createElement("div");s.innerHTML=e,this.element.firstChild?this.element.replaceChild(s.firstChild,this.element.firstChild):this.element.appendChild(s.firstChild),o.methods&&this.element&&Object.keys(o.methods).forEach(t=>{this.element.querySelectorAll(`[data-on-${t}]`).forEach(e=>{e.addEventListener(t.split("on")[1],e=>{e.preventDefault();const n=this[t];"function"==typeof n&&n(e)})})})}o.updated?.call(this)}};let a="";if(o.template){a=o.template.replace(/\{\{([^}]+)\}\}/g,(t,e)=>{const n=e.trim().split(".");let s=r.state;n[0]in r.props&&(s=r.props);for(const t of n)s=s&&s[t];return void 0!==s?s:""}),a=a.replace(/<slot><\/slot>/gi,r.slots.default||""),a=a.replace(/<slot name="([^"]+)"><\/slot>/gi,(t,e)=>r.slots[e]||"");const t=n(a);r.element=document.createElement("div"),r.element.innerHTML=t,r.element=r.element.firstElementChild}else if(o.render){a=o.render.call(r);const t=n(a);r.element=document.createElement("div"),r.element.innerHTML=t,r.element=r.element.firstElementChild}return o.beforeCreate?.call(r),o.created?.call(r),r.element&&f.set(r.element,r),r}function p(t,e){let n;if(n="string"==typeof t?m(t):t,!n||!n.element)return console.error("Invalid component"),null;const s="string"==typeof e?document.querySelector(e):e;if(!s)return console.error("Invalid target element"),null;s.appendChild(n.element),n.mounted=!0;const i=u[n.name];return i?.mounted?.call(n),n}function y(t){return f.get(t)}function g(t){if(!t||!t.element)return;const e=u[t.name];e?.beforeUnmount?.call(t),t.element.parentNode&&t.element.parentNode.removeChild(t.element),t.listeners.forEach(t=>{if("object"==typeof t&&null!==t&&"element"in t&&"event"in t&&"handler"in t){const{element:e,event:n,handler:s}=t;e.removeEventListener(n,s)}}),f.delete(t.element),t.mounted=!1,e&&e.unmounted&&e.unmounted.call(t)}const b={};function v(t){return new Proxy(t,{get:(t,e)=>t[e],set(t,e,n){const s=e,i=t[s];return i!==n&&(t[s]=n,b[s]&&b[s].forEach(t=>{t.callback(n,i,t.property)})),!0}})}function w(t,e){const n=t;b[n]||(b[n]=[]);const s={callback:e,property:t};return b[n].push(s),function(){const t=b[n].indexOf(s);t>-1&&b[n].splice(t,1)}}function x(t,e,n,s="value"){const o="string"==typeof t?document.querySelector(t):t;if(!o)return;if(!i(n))return void console.error("OneKit Security: Invalid property key (prototype pollution attempt blocked)");const r=e[n];void 0!==r&&(o[s]=r),o.addEventListener("input",function(){let t=this[s];"string"==typeof t&&(t=t.replace(/\0/g,"")),e[n]=t}),w(n,function(t){o[s]=t})}function E(t,e={},...n){return{tag:t,props:e||{},children:n.flat(),key:"string"==typeof e.key?e.key:void 0}}function A(t){if("string"==typeof t)return document.createTextNode(t);const e=document.createElement(t.tag);for(const n in t.props){if("key"===n)continue;const s=t.props[n];n.startsWith("on")&&"function"==typeof s?e.addEventListener(n.slice(2).toLowerCase(),s):"className"===n&&"string"==typeof s?e.setAttribute("class",s):"style"===n&&"object"==typeof s&&null!==s?Object.assign(e.style,s):"string"==typeof s&&e.setAttribute(n,s)}return t.children.forEach(t=>{e.appendChild(A(t))}),e._vnode=t,e}function T(t,e,n){const s=t.firstChild;if(s)return n?void("string"!=typeof e||"string"!=typeof n?"string"!=typeof e&&"string"!=typeof n&&e.tag===n.tag?(function(t,e,n){for(const s in n)if("key"!==s&&!(s in e))if(s.startsWith("on")){const e=n[s];"function"==typeof e&&t.removeEventListener(s.slice(2).toLowerCase(),e)}else t.removeAttribute(s);for(const s in e){if("key"===s)continue;const i=e[s];i!==n[s]&&(s.startsWith("on")&&"function"==typeof i?t.addEventListener(s.slice(2).toLowerCase(),i):"className"===s&&"string"==typeof i?t.setAttribute("class",i):"style"===s&&"object"==typeof i&&null!==i?Object.assign(t.style,i):"string"==typeof i&&t.setAttribute(s,i))}}(s,e.props,n.props),function(t,e,n){const s=Math.max(e.length,n.length);for(let i=0;i<s;i++){const s=e[i],o=n[i];!s&&o?t.removeChild(t.childNodes[i]):s&&!o?t.appendChild(A(s)):s&&o&&T(t.childNodes[i],s,o)}}(s,e.children,n.children)):t.replaceChild(A(e),s):e!==n&&(s.textContent=e)):(t.innerHTML="",void t.appendChild(A(e)));t.appendChild(A(e))}const L={scaleIn(t=300){return this.each(function(){const e=this;e.style.transform="scale(0)",e.style.opacity="0",e.style.transition=`transform ${t}ms ease-out, opacity ${t}ms ease-out`,e.offsetHeight,e.style.transform="scale(1)",e.style.opacity="1",setTimeout(()=>{e.style.transition=""},t)})},scaleOut(t=300){return this.each(function(){const e=this;e.style.transform="scale(1)",e.style.opacity="1",e.style.transition=`transform ${t}ms ease-in, opacity ${t}ms ease-in`,e.offsetHeight,e.style.transform="scale(0)",e.style.opacity="0",setTimeout(()=>{e.style.transition=""},t)})},rotateIn(t=500){return this.each(function(){const e=this;e.style.transform="rotate(-180deg) scale(0)",e.style.opacity="0",e.style.transition=`transform ${t}ms ease-out, opacity ${t}ms ease-out`,e.offsetHeight,e.style.transform="rotate(0) scale(1)",e.style.opacity="1",setTimeout(()=>{e.style.transition=""},t)})},rotateOut(t=500){return this.each(function(){const e=this;e.style.transform="rotate(0) scale(1)",e.style.opacity="1",e.style.transition=`transform ${t}ms ease-in, opacity ${t}ms ease-in`,e.offsetHeight,e.style.transform="rotate(180deg) scale(0)",e.style.opacity="0",setTimeout(()=>{e.style.transition=""},t)})},bounce(t=1e3){return this.each(function(){const e=this;e.style.animation=`bounce ${t}ms ease-in-out`,setTimeout(()=>{e.style.animation=""},t)})},shake(t=500){return this.each(function(){const e=this;e.style.animation=`shake ${t}ms ease-in-out`,setTimeout(()=>{e.style.animation=""},t)})},slideInLeft(t=400){return this.each(function(){const e=this;e.style.transform="translateX(-100%)",e.style.opacity="0",e.style.transition=`transform ${t}ms ease-out, opacity ${t}ms ease-out`,e.offsetHeight,e.style.transform="translateX(0)",e.style.opacity="1",setTimeout(()=>{e.style.transition=""},t)})},slideInRight(t=400){return this.each(function(){const e=this;e.style.transform="translateX(100%)",e.style.opacity="0",e.style.transition=`transform ${t}ms ease-out, opacity ${t}ms ease-out`,e.offsetHeight,e.style.transform="translateX(0)",e.style.opacity="1",setTimeout(()=>{e.style.transition=""},t)})},slideInUp(t=400){return this.each(function(){const e=this;e.style.transform="translateY(100%)",e.style.opacity="0",e.style.transition=`transform ${t}ms ease-out, opacity ${t}ms ease-out`,e.offsetHeight,e.style.transform="translateY(0)",e.style.opacity="1",setTimeout(()=>{e.style.transition=""},t)})},slideInDown(t=400){return this.each(function(){const e=this;e.style.transform="translateY(-100%)",e.style.opacity="0",e.style.transition=`transform ${t}ms ease-out, opacity ${t}ms ease-out`,e.offsetHeight,e.style.transform="translateY(0)",e.style.opacity="1",setTimeout(()=>{e.style.transition=""},t)})},flip(t=600){return this.each(function(){const e=this;e.style.transform="rotateY(0)",e.style.transition=`transform ${t}ms ease-in-out`,e.offsetHeight,e.style.transform="rotateY(360deg)",setTimeout(()=>{e.style.transition="",e.style.transform=""},t)})},pulse(t=1e3,e=1){return this.each(function(){const n=this;n.style.animation=`pulse ${t}ms ease-in-out ${e}`,setTimeout(()=>{n.style.animation=""},t*e)})},glow(t=1e3,e="#ffff00"){return this.each(function(){const n=this;n.style.boxShadow=`0 0 5px ${e}`,n.style.transition=`box-shadow ${t}ms ease-in-out`,n.offsetHeight,n.style.boxShadow=`0 0 20px ${e}, 0 0 30px ${e}`,setTimeout(()=>{n.style.boxShadow=`0 0 5px ${e}`,setTimeout(()=>{n.style.transition="",n.style.boxShadow=""},t)},t)})}},k=document.createElement("style");k.textContent="\n  @keyframes bounce { 0%, 20%, 53%, 80%, 100% { transform: translate3d(0, 0, 0); } 40%, 43% { transform: translate3d(0, -30px, 0); } 70% { transform: translate3d(0, -15px, 0); } 90% { transform: translate3d(0, -4px, 0); } }\n  @keyframes shake { 0%, 100% { transform: translate3d(0, 0, 0); } 10%, 30%, 50%, 70%, 90% { transform: translate3d(-10px, 0, 0); } 20%, 40%, 60%, 80% { transform: translate3d(10px, 0, 0); } }\n  @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }\n",document.head.appendChild(k),Object.keys(L).forEach(t=>{o.prototype[t]=L[t]});const S={"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"};function C(t,n={}){return new Promise((s,i)=>{const o=function(t){if(!e.enableValidation)return t;try{const e=new URL(t,window.location.origin);return["http:","https:"].includes(e.protocol)?e.href:""}catch{return""}}(t);if(!o)return void i(new Error("Invalid URL"));const r={method:"GET",headers:{...S},timeout:3e4,retries:0,retryDelay:1e3,...n},a=(t=0)=>{const e=new XMLHttpRequest,n=setTimeout(()=>{e.abort(),i(new Error("Request timeout"))},r.timeout);e.open(r.method,o);for(const t in r.headers)e.setRequestHeader(t,r.headers[t]);r.onProgress&&e.addEventListener("progress",t=>{t.lengthComputable&&r.onProgress(t.loaded/t.total)}),e.onload=function(){clearTimeout(n);const o={status:e.status,statusText:e.statusText,headers:I(e.getAllResponseHeaders()),data:null,url:e.responseURL};try{e.responseText&&(o.data=JSON.parse(e.responseText))}catch(t){o.data=e.responseText}if(e.status>=200&&e.status<300)s(o);else{const n=new Error(`HTTP ${e.status}: ${e.statusText}`);n.response=o,t<(r.retries||0)?setTimeout(()=>a(t+1),r.retryDelay):i(n)}},e.onerror=function(){clearTimeout(n),t<(r.retries||0)?setTimeout(()=>a(t+1),r.retryDelay):i(new Error("Network error"))},r.body&&"object"==typeof r.body?e.send(JSON.stringify(r.body)):e.send(r.body)};a()})}function O(t,e={}){return C(t,{...e,method:"GET"})}function $(t,e,n={}){return C(t,{...n,method:"POST",body:e})}function N(t,e,n={}){return C(t,{...n,method:"PUT",body:e})}function H(t,e={}){return C(t,{...e,method:"DELETE"})}function R(t,e,n={}){return C(t,{...n,method:"PATCH",body:e})}function I(t){const e={},n=t.split("\n");for(const t of n){const n=t.indexOf(":");if(n>0){const s=t.slice(0,n).trim().toLowerCase(),i=t.slice(n+1).trim();e[s]=i}}return e}class P{baseURL;defaultOptions;constructor(t,e={}){this.baseURL=t.replace(/\/$/,""),this.defaultOptions=e}buildURL(t){return`${this.baseURL}${t.startsWith("/")?t:"/"+t}`}get(t,e={}){return C(this.buildURL(t),{...this.defaultOptions,...e,method:"GET"})}post(t,e,n={}){return C(this.buildURL(t),{...this.defaultOptions,...n,method:"POST",body:e})}put(t,e,n={}){return C(this.buildURL(t),{...this.defaultOptions,...n,method:"PUT",body:e})}delete(t,e={}){return C(this.buildURL(t),{...this.defaultOptions,...e,method:"DELETE"})}patch(t,e,n={}){return C(this.buildURL(t),{...this.defaultOptions,...n,method:"PATCH",body:e})}}class _{routes=[];addRoute(t){this.routes.push(t)}navigate(t){const e=this.routes.find(e=>e.path===t);e?.handler&&e.handler()}getCurrentPath(){return window.location.pathname}}const q=new _;class j{storage;options;constructor(t,e={}){this.storage=t,this.options={prefix:e.prefix||"",serialize:e.serialize||JSON.stringify,deserialize:e.deserialize||JSON.parse,ttl:e.ttl||0}}getKey(t){return this.options.prefix+t}isExpired(t){return this.options.ttl>0&&Date.now()-t>this.options.ttl}set(e,n){try{if(!i(e))return console.error("OneKit Security: Invalid storage key (prototype pollution attempt blocked)"),!1;const t={value:this.options.serialize(n),timestamp:Date.now()};return this.storage.setItem(this.getKey(e),JSON.stringify(t)),!0}catch(e){return t(e,"Storage.set"),!1}}get(e,n){try{if(!i(e))return console.error("OneKit Security: Invalid storage key (prototype pollution attempt blocked)"),n;const t=this.storage.getItem(this.getKey(e));if(!t)return n;const s=JSON.parse(t);return this.isExpired(s.timestamp)?(this.remove(e),n):this.options.deserialize(s.value)}catch(e){return t(e,"Storage.get"),n}}remove(e){try{return i(e)?(this.storage.removeItem(this.getKey(e)),!0):(console.error("OneKit Security: Invalid storage key (prototype pollution attempt blocked)"),!1)}catch(e){return t(e,"Storage.remove"),!1}}clear(){try{const t=[];for(let e=0;e<this.storage.length;e++){const n=this.storage.key(e);n&&n.startsWith(this.options.prefix)&&t.push(n)}return t.forEach(t=>this.storage.removeItem(t)),!0}catch(e){return t(e,"Storage.clear"),!1}}has(t){try{if(!i(t))return!1;const e=this.storage.getItem(this.getKey(t));if(!e)return!1;const n=JSON.parse(e);return!this.isExpired(n.timestamp)}catch(t){return!1}}keys(){try{const t=[];for(let e=0;e<this.storage.length;e++){const n=this.storage.key(e);if(n&&n.startsWith(this.options.prefix)){const e=n.slice(this.options.prefix.length),s=this.storage.getItem(n);if(s){const n=JSON.parse(s);this.isExpired(n.timestamp)||t.push(e)}}}return t}catch(e){return t(e,"Storage.keys"),[]}}size(){return this.keys().length}}const M=new j(window.localStorage,{prefix:"onekit_"}),D=new j(window.sessionStorage,{prefix:"onekit_"});function U(t,e){return new j(t,e)}const W=new j(window.sessionStorage,{prefix:"onekit_cache_",ttl:3e5});function F(t,e){let n;return(...s)=>{clearTimeout(n),n=setTimeout(()=>t(...s),e)}}function K(t,e){let n;return(...s)=>{n||(t(...s),n=!0,setTimeout(()=>n=!1,e))}}function z(t){if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t.getTime());if(Array.isArray(t))return t.map(t=>z(t));const e={};for(const n in t)t.hasOwnProperty(n)&&(e[n]=z(t[n]));return e}function J(){return Math.random().toString(36).substr(2,9)}function B(e,n){try{for(const[t,s]of Object.entries(n))null==s?e.removeAttribute(t):e.setAttribute(t,String(s))}catch(e){t(e,"setAriaAttributes")}}function V(e,n="polite"){try{let t=document.getElementById("onekit-a11y-announcer");t||(t=document.createElement("div"),t.id="onekit-a11y-announcer",t.setAttribute("aria-live",n),t.setAttribute("aria-atomic","true"),t.style.position="absolute",t.style.left="-10000px",t.style.width="1px",t.style.height="1px",t.style.overflow="hidden",document.body.appendChild(t)),t.setAttribute("aria-live",n),t.textContent=e}catch(e){t(e,"announce")}}function X(e){try{const n=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),s=n[0],i=n[n.length-1];function o(t){"Tab"===t.key&&(t.shiftKey?document.activeElement===s&&(t.preventDefault(),i.focus()):document.activeElement===i&&(t.preventDefault(),s.focus()))}return e.addEventListener("keydown",o),s&&s.focus(),()=>{e.removeEventListener("keydown",o)}}catch(r){return t(r,"trapFocus"),()=>{}}}function Y(e){try{e.setAttribute("tabindex","0")}catch(e){t(e,"makeFocusable")}}function G(e){try{e.setAttribute("tabindex","-1")}catch(e){t(e,"makeUnfocusable")}}function Q(e){try{const t=document.getElementById(e);t&&(t.focus(),t.scrollIntoView())}catch(e){t(e,"skipToContent")}}function Z(e,n="Skip to main content"){try{const t=document.createElement("a");return t.href=e,t.textContent=n,t.className="skip-link",t.style.cssText="\n      position: absolute;\n      top: -40px;\n      left: 6px;\n      background: #000;\n      color: #fff;\n      padding: 8px;\n      text-decoration: none;\n      z-index: 100;\n      transition: top 0.3s;\n    ",t.addEventListener("focus",()=>{t.style.top="6px"}),t.addEventListener("blur",()=>{t.style.top="-40px"}),t}catch(e){return t(e,"createSkipLink"),document.createElement("a")}}function tt(e,n=!0){try{e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])').forEach(t=>{n?t.hasAttribute("data-original-tabindex")&&(t.setAttribute("tabindex",t.getAttribute("data-original-tabindex")),t.removeAttribute("data-original-tabindex")):(t.hasAttribute("data-original-tabindex")||t.setAttribute("data-original-tabindex",t.getAttribute("tabindex")||"0"),t.setAttribute("tabindex","-1"))})}catch(e){t(e,"manageTabOrder")}}function et(){try{[{id:"main",role:"main",selector:'main, [role="main"]'},{id:"navigation",role:"navigation",selector:'nav, [role="navigation"]'},{id:"banner",role:"banner",selector:'header, [role="banner"]'},{id:"contentinfo",role:"contentinfo",selector:'footer, [role="contentinfo"]'}].forEach(({id:t,role:e,selector:n})=>{if(!document.getElementById(t)){const s=document.querySelector(n);s&&!s.hasAttribute("role")&&(s.id=t,s.setAttribute("role",e))}})}catch(e){t(e,"createLandmarks")}}function nt(e){const n=[],s=[];try{e.querySelectorAll("img").forEach(t=>{t.hasAttribute("alt")||n.push("Image missing alt attribute")});e.querySelectorAll("input, select, textarea").forEach(t=>{const n=t.id;e.querySelector(`label[for="${n}"]`)||t.hasAttribute("aria-label")||t.hasAttribute("aria-labelledby")||s.push("Form input may be missing a label")});const t=e.querySelectorAll("h1, h2, h3, h4, h5, h6");let i=0;t.forEach(t=>{const e=parseInt(t.tagName.charAt(1));e-i>1&&s.push("Heading hierarchy may be broken"),i=e});e.querySelectorAll('[style*="color"], [style*="background"]').length>0&&s.push("Manual color contrast check recommended for styled elements")}catch(e){t(e,"validateAccessibility")}return{errors:n,warnings:s}}const st="3.0.0-alpha";export{P as API,l as DependencyInjector,o as OneKit,_ as Router,st as VERSION,L as animations,V as announce,R as apiPatch,x as bind,W as cache,m as create,E as createElement,et as createLandmarks,Z as createSkipLink,U as createStorage,F as debounce,z as deepClone,H as del,g as destroy,c as di,J as generateId,O as get,y as getInstance,M as localStorage,Y as makeFocusable,G as makeUnfocusable,tt as manageTabOrder,p as mount,r as ok,h as pluginManager,$ as post,N as put,v as reactive,d as register,A as render,C as request,q as router,D as sessionStorage,B as setAriaAttributes,Q as skipToContent,K as throttle,X as trapFocus,nt as validateAccessibility,T as vdomPatch,w as watch};
//# sourceMappingURL=onekit.esm.min.js.map
