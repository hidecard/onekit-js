{"version":3,"file":"onekit.esm.min.js","sources":["../src/core/error-handler.ts","../src/core/security.ts","../src/core/index.ts","../src/core/di.ts","../src/core/plugin.ts","../src/modules/component.ts","../src/modules/reactive.ts","../src/modules/vdom.ts","../src/modules/animation.ts","../src/modules/api.ts","../src/modules/router.ts","../src/modules/storage.ts","../src/modules/utils.ts","../src/modules/a11y.ts","../src/index.ts"],"sourcesContent":["// Error handling system\nexport function errorHandler(error: Error | string | unknown, context: string = 'Unknown'): null {\n  console.error(`OneKit Error [${context}]:`, error);\n\n  // Dispatch a custom error event\n  const event = new CustomEvent('onekit-error', {\n    detail: { error, context },\n    bubbles: true,\n    cancelable: true\n  });\n  document.dispatchEvent(event);\n\n  return null;\n}\n\n// Safe method wrapper\nexport function safeMethod<T extends (...args: any[]) => any>(method: T): T {\n  return function(this: any, ...args: Parameters<T>) {\n    try {\n      return method.apply(this, args);\n    } catch (error) {\n      errorHandler(error, method.name);\n      return this; // Return this for method chaining\n    }\n  } as T;\n}\n","// Security utilities for OneKit\nexport interface SecurityConfig {\n  ALLOWED_TAGS: string[];\n  ALLOWED_ATTRIBUTES: string[];\n  enableSanitization: boolean;\n  enableValidation: boolean;\n}\n\nconst DEFAULT_SECURITY_CONFIG: SecurityConfig = {\n  ALLOWED_TAGS: [\n    'div', 'span', 'p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',\n    'ul', 'ol', 'li', 'a', 'img', 'br', 'strong', 'em', 'b', 'i',\n    'table', 'thead', 'tbody', 'tr', 'th', 'td', 'input', 'button',\n    'form', 'label', 'select', 'option', 'textarea'\n  ],\n  ALLOWED_ATTRIBUTES: [\n    'id', 'class', 'style', 'href', 'src', 'alt', 'title', 'type',\n    'name', 'value', 'placeholder', 'disabled', 'checked', 'selected',\n    'width', 'height', 'colspan', 'rowspan', 'data-*'\n  ],\n  enableSanitization: true,\n  enableValidation: true\n};\n\nlet securityConfig = { ...DEFAULT_SECURITY_CONFIG };\n\n// Sanitize HTML content with enhanced security\nexport function sanitizeHTML(html: string): string {\n  if (!securityConfig.enableSanitization) return html;\n\n  const div = document.createElement('div');\n  div.innerHTML = html;\n\n  const sanitizeNode = (node: Node): void => {\n    if (node.nodeType === Node.ELEMENT_NODE) {\n      const element = node as Element;\n      const tagName = element.tagName.toLowerCase();\n\n      if (!securityConfig.ALLOWED_TAGS.includes(tagName)) {\n        element.remove();\n        return;\n      }\n\n      // Remove disallowed attributes and dangerous ones\n      const attributes = Array.from(element.attributes);\n      for (const attr of attributes) {\n        const attrName = attr.name.toLowerCase();\n        const attrValue = attr.value;\n\n        // Check for dangerous attribute patterns\n        const dangerousAttrPatterns = [\n          /^on\\w+$/i, // Event handlers\n          /^javascript:/i,\n          /^vbscript:/i,\n          /^data:/i,\n          /expression\\s*\\(/i,\n          /eval\\s*\\(/i,\n          /Function\\s*\\(/i\n        ];\n\n        const isDangerous = dangerousAttrPatterns.some(pattern => pattern.test(attrName) || pattern.test(attrValue));\n\n        const isAllowed = securityConfig.ALLOWED_ATTRIBUTES.some(allowed => {\n          if (allowed.endsWith('*')) {\n            return attrName.startsWith(allowed.slice(0, -1));\n          }\n          return attrName === allowed;\n        });\n\n        if (!isAllowed || isDangerous) {\n          element.removeAttribute(attr.name);\n        }\n      }\n\n      // Sanitize children\n      const children = Array.from(element.childNodes);\n      for (const child of children) {\n        sanitizeNode(child);\n      }\n    } else if (node.nodeType === Node.TEXT_NODE) {\n      // Ensure text nodes don't contain dangerous content\n      const textContent = node.textContent || '';\n      const dangerousTextPatterns = [\n        /javascript:/i,\n        /vbscript:/i,\n        /data:/i,\n        /on\\w+\\s*=/i\n      ];\n\n      if (dangerousTextPatterns.some(pattern => pattern.test(textContent))) {\n        node.textContent = textContent.replace(/javascript:|vbscript:|data:|on\\w+=/gi, '');\n      }\n    }\n  };\n\n  sanitizeNode(div);\n  return div.innerHTML;\n}\n\n// Validate CSS selector for security\nexport function validateSelector(selector: string): boolean {\n  if (!securityConfig.enableValidation) return true;\n\n  // Basic validation - prevent script injection\n  const dangerousPatterns = [\n    /javascript:/i,\n    /vbscript:/i,\n    /data:/i,\n    /expression\\s*\\(/i,\n    /on\\w+\\s*=/i\n  ];\n\n  return !dangerousPatterns.some(pattern => pattern.test(selector));\n}\n\n// Sanitize URL\nexport function sanitizeURL(url: string): string {\n  if (!securityConfig.enableValidation) return url;\n\n  try {\n    const parsed = new URL(url, window.location.origin);\n    // Only allow http and https protocols\n    if (!['http:', 'https:'].includes(parsed.protocol)) {\n      return '';\n    }\n    return parsed.href;\n  } catch {\n    return '';\n  }\n}\n\n// Deep clone with security checks\nexport function deepCloneSafe(obj: any): any {\n  if (obj === null || typeof obj !== 'object') return obj;\n\n  if (obj instanceof Date) return new Date(obj);\n  if (obj instanceof RegExp) return new RegExp(obj);\n  if (typeof obj === 'function') return obj; // Functions are allowed but not cloned\n\n  if (Array.isArray(obj)) {\n    return obj.map(item => deepCloneSafe(item));\n  }\n\n  const cloned: { [key: string]: any } = {};\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      cloned[key] = deepCloneSafe(obj[key]);\n    }\n  }\n  return cloned;\n}\n\n// Validate storage key\nexport function validateStorageKey(key: string): boolean {\n  if (!securityConfig.enableValidation) return true;\n\n  // Prevent prototype pollution and other attacks\n  const dangerousKeys = [\n    '__proto__',\n    'constructor',\n    'prototype',\n    'toString',\n    'valueOf',\n    'hasOwnProperty',\n    'isPrototypeOf'\n  ];\n\n  return !dangerousKeys.includes(key) && typeof key === 'string' && key.length > 0;\n}\n\n// Update security configuration\nexport function updateSecurityConfig(config: Partial<SecurityConfig>): void {\n  securityConfig = { ...securityConfig, ...config };\n}\n\n// Get current security configuration\nexport function getSecurityConfig(): SecurityConfig {\n  return { ...securityConfig };\n}\n\n// Generate Content Security Policy header\nexport function generateCSPHeader(directives?: Record<string, string[]>): string {\n  const defaultDirectives = {\n    'default-src': [\"'self'\"],\n    'script-src': [\"'self'\"],\n    'style-src': [\"'self'\", \"'unsafe-inline'\"],\n    'img-src': [\"'self'\", 'data:', 'https:'],\n    'font-src': [\"'self'\"],\n    'connect-src': [\"'self'\"],\n    'object-src': [\"'none'\"],\n    'base-uri': [\"'self'\"],\n    'form-action': [\"'self'\"]\n  };\n\n  const finalDirectives = { ...defaultDirectives, ...directives };\n  return Object.entries(finalDirectives)\n    .map(([key, values]) => `${key} ${values.join(' ')}`)\n    .join('; ');\n}\n\n// Validate JSON input for security\nexport function validateJSON(jsonString: string): boolean {\n  if (!securityConfig.enableValidation) return true;\n\n  try {\n    const parsed = JSON.parse(jsonString);\n    // Check for prototype pollution attempts\n    const checkObject = (obj: any): boolean => {\n      if (obj === null || typeof obj !== 'object') return true;\n      if (Array.isArray(obj)) return obj.every(checkObject);\n      return Object.keys(obj).every(key => {\n        if (['__proto__', 'constructor', 'prototype'].includes(key)) return false;\n        return checkObject(obj[key]);\n      });\n    };\n    return checkObject(parsed);\n  } catch {\n    return false;\n  }\n}\n\n// Sanitize user input for database/storage\nexport function sanitizeInput(input: string): string {\n  if (!securityConfig.enableSanitization) return input;\n\n  return input\n    .replace(/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, '')\n    .replace(/javascript:/gi, '')\n    .replace(/vbscript:/gi, '')\n    .replace(/on\\w+\\s*=/gi, '')\n    .replace(/\\0/g, ''); // Remove null bytes\n}\n","// Core OneKit functionality\nimport { errorHandler, safeMethod } from './error-handler';\nimport { sanitizeHTML, validateSelector, sanitizeURL, deepCloneSafe, validateStorageKey } from './security';\n\nexport interface OneKitConfig {\n  enableSanitization?: boolean;\n  enableValidation?: boolean;\n}\n\nexport class OneKit {\n  public elements: Element[] = [];\n  static _cache: Map<string, any> = new Map<string, any>();\n\n  constructor(selector?: string | Element | NodeList | OneKit | Element[]) {\n    if (!selector) {\n      return;\n    }\n\n    if (selector instanceof Element) {\n      this.elements.push(selector);\n      return;\n    }\n\n    if (typeof selector === 'string') {\n      if (!validateSelector(selector)) {\n        console.error('OneKit: Invalid selector - potential security risk');\n        return;\n      }\n\n      if (selector.charAt(0) === '<' && selector.charAt(selector.length - 1) === '>') {\n        const sanitized = sanitizeHTML(selector);\n        const div = document.createElement('div');\n        div.innerHTML = sanitized;\n        for (let i = 0; i < div.childNodes.length; i++) {\n          this.elements.push(div.childNodes[i] as Element);\n        }\n        return;\n      }\n\n      const elements = document.querySelectorAll(selector);\n      for (let i = 0; i < elements.length; i++) {\n        this.elements.push(elements[i]);\n      }\n      return;\n    }\n\n    if (selector instanceof NodeList) {\n      for (let i = 0; i < selector.length; i++) {\n        this.elements.push(selector[i] as Element);\n      }\n      return;\n    }\n\n    if (selector instanceof OneKit) {\n      this.elements = [...selector.elements];\n      return;\n    }\n\n    if (Array.isArray(selector)) {\n      this.elements = [...selector];\n      return;\n    }\n  }\n\n  // Core methods\n  first(): OneKit {\n    if (this.elements.length > 0) {\n      return new OneKit(this.elements[0]);\n    }\n    return new OneKit();\n  }\n\n  last(): OneKit {\n    if (this.elements.length > 0) {\n      return new OneKit(this.elements[this.elements.length - 1]);\n    }\n    return new OneKit();\n  }\n\n  each(callback: (this: Element, index: number, element: Element) => void): OneKit {\n    for (let i = 0; i < this.elements.length; i++) {\n      callback.call(this.elements[i], i, this.elements[i]);\n    }\n    return this;\n  }\n\n  find(selector: string): OneKit {\n    const elements: Element[] = [];\n    this.each(function() {\n      const found = this.querySelectorAll(selector);\n      for (let i = 0; i < found.length; i++) {\n        elements.push(found[i] as Element);\n      }\n    });\n    return new OneKit(elements);\n  }\n\n  // DOM manipulation methods\n  class(className: string): OneKit {\n    return this.each(function() {\n      if (this.classList) {\n        this.classList.add(className);\n      } else {\n        this.className += ' ' + className;\n      }\n    });\n  }\n\n  unclass(className: string): OneKit {\n    return this.each(function() {\n      if (this.classList) {\n        this.classList.remove(className);\n      } else {\n        this.className = this.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\n      }\n    });\n  }\n\n  toggleClass(className: string): OneKit {\n    return this.each(function() {\n      if (this.classList) {\n        this.classList.toggle(className);\n      } else {\n        const classes = this.className.split(' ');\n        const existingIndex = classes.indexOf(className);\n\n        if (existingIndex >= 0) {\n          classes.splice(existingIndex, 1);\n        } else {\n          classes.push(className);\n        }\n        this.className = classes.join(' ');\n      }\n    });\n  }\n\n  html(content?: string): string | null | OneKit {\n    if (content === undefined) {\n      return this.elements.length > 0 ? this.elements[0].innerHTML : null;\n    }\n    return this.each(function() {\n      this.innerHTML = sanitizeHTML(content);\n    });\n  }\n\n  text(content?: string): string | null | OneKit {\n    if (content === undefined) {\n      return this.elements.length > 0 ? this.elements[0].textContent : null;\n    }\n    return this.each(function() {\n      this.textContent = content;\n    });\n  }\n\n  attr(name: string | Record<string, string>, value?: string): string | OneKit {\n    if (typeof name === 'object') {\n      return this.each(function() {\n        for (const key in name) {\n          this.setAttribute(key, name[key]);\n        }\n      });\n    }\n\n    if (value === undefined) {\n      return this.elements.length > 0 ? this.elements[0].getAttribute(name) || '' : '';\n    }\n    return this.each(function() {\n      this.setAttribute(name, value);\n    });\n  }\n\n  unattr(name: string): OneKit {\n    return this.each(function() {\n      this.removeAttribute(name);\n    });\n  }\n\n  css(prop: string | object, value?: string | number): string | null | OneKit {\n    if (typeof prop === 'object') {\n      return this.each(function() {\n        const element = this as HTMLElement;\n        for (const key in prop) {\n          ((element as HTMLElement).style as any)[key] = (prop as any)[key];\n        }\n      });\n    }\n\n    if (value === undefined) {\n      if (this.elements.length > 0) {\n        const styles = window.getComputedStyle(this.elements[0]);\n        return styles.getPropertyValue(prop);\n      }\n      return null;\n    }\n    return this.each(function() {\n      const element = this as HTMLElement;\n      (element.style as any)[prop] = value;\n    });\n  }\n\n  show(): OneKit {\n    return this.each(function() {\n      (this as HTMLElement).style.display = '';\n    });\n  }\n\n  hide(): OneKit {\n    return this.each(function() {\n      (this as HTMLElement).style.display = 'none';\n    });\n  }\n\n  toggle(): OneKit {\n    return this.each(function() {\n      const element = this as HTMLElement;\n      element.style.display = element.style.display === 'none' ? '' : 'none';\n    });\n  }\n\n  clone(): OneKit {\n    const elements: Element[] = [];\n    this.each(function() {\n      elements.push(this.cloneNode(true) as Element);\n    });\n    return new OneKit(elements);\n  }\n\n  parent(): OneKit {\n    if (this.elements.length > 0) {\n      return new OneKit(this.elements[0].parentNode as Element);\n    }\n    return new OneKit();\n  }\n\n  kids(selector?: string): OneKit {\n    const elements: Element[] = [];\n    this.each(function() {\n      const children = selector ?\n        this.querySelectorAll(selector) :\n        this.children;\n\n      for (let i = 0; i < children.length; i++) {\n        elements.push(children[i] as Element);\n      }\n    });\n    return new OneKit(elements);\n  }\n\n  sibs(selector?: string): OneKit {\n    const elements: Element[] = [];\n    this.each(function() {\n      if (this.parentNode) {\n        const siblings = this.parentNode.children;\n\n        for (let i = 0; i < siblings.length; i++) {\n          if (siblings[i] !== this && (!selector || (siblings[i] as Element).matches?.(selector))) {\n            elements.push(siblings[i] as Element);\n          }\n        }\n      }\n    });\n    return new OneKit(elements);\n  }\n\n  append(content: string | Element | OneKit): OneKit {\n    return this.each(function() {\n      if (typeof content === 'string') {\n        const sanitized = sanitizeHTML(content);\n        this.insertAdjacentHTML('beforeend', sanitized);\n      } else if (content instanceof Element) {\n        this.appendChild(content);\n      } else if (content instanceof OneKit) {\n        for (let i = 0; i < content.elements.length; i++) {\n          this.appendChild(content.elements[i]);\n        }\n      }\n    });\n  }\n\n  prepend(content: string | Element | OneKit): OneKit {\n    return this.each(function() {\n      if (typeof content === 'string') {\n        const sanitized = sanitizeHTML(content);\n        this.insertAdjacentHTML('afterbegin', sanitized);\n      } else if (content instanceof Element) {\n        this.insertBefore(content, this.firstChild);\n      } else if (content instanceof OneKit) {\n        for (let i = content.elements.length - 1; i >= 0; i--) {\n          this.insertBefore(content.elements[i], this.firstChild);\n        }\n      }\n    });\n  }\n\n  remove(): OneKit {\n    return this.each(function() {\n      if (this.parentNode) {\n        this.parentNode.removeChild(this);\n      }\n    });\n  }\n\n  on(event: string, selector?: string | Function, handler?: Function): OneKit {\n    if (typeof selector === 'function') {\n      handler = selector;\n      selector = undefined;\n    }\n\n    return this.each(function() {\n      if (selector && handler) {\n        this.addEventListener(event, function(e: Event) {\n          if (e.target && (e.target as Element).matches?.(selector)) {\n            handler!.call(e.target, e);\n          }\n        });\n      } else if (handler) {\n        this.addEventListener(event, handler as EventListener);\n      }\n    });\n  }\n\n  off(event: string, handler: Function): OneKit {\n    return this.each(function() {\n      (this as HTMLElement).removeEventListener(event, handler as EventListener);\n    });\n  }\n\n  click(handler: Function): OneKit {\n    return this.on('click', handler);\n  }\n\n  hover(enterHandler: Function, leaveHandler: Function): OneKit {\n    return this.on('mouseenter', enterHandler).on('mouseleave', leaveHandler);\n  }\n\n  focus(handler: Function): OneKit {\n    return this.on('focus', handler);\n  }\n\n  // Animation methods\n  fade_in(duration: number = 400): Promise<Element> {\n    return new Promise(resolve => {\n      this.each(function() {\n        const element = this as HTMLElement;\n        element.style.opacity = '0';\n        element.style.display = '';\n\n        const start = performance.now();\n\n        function animate(time: number) {\n          let timeFraction = (time - start) / duration;\n          if (timeFraction > 1) timeFraction = 1;\n\n          element.style.opacity = timeFraction.toString();\n\n          if (timeFraction < 1) {\n            requestAnimationFrame(animate);\n          } else {\n            resolve(element);\n          }\n        }\n\n        requestAnimationFrame(animate);\n      });\n    });\n  }\n\n  fade_out(duration: number = 400): Promise<Element> {\n    return new Promise(resolve => {\n      this.each(function() {\n        const element = this as HTMLElement;\n        const startOpacity = parseFloat(window.getComputedStyle(element).opacity);\n\n        const start = performance.now();\n\n        function animate(time: number) {\n          let timeFraction = (time - start) / duration;\n          if (timeFraction > 1) timeFraction = 1;\n\n          element.style.opacity = (startOpacity * (1 - timeFraction)).toString();\n\n          if (timeFraction < 1) {\n            requestAnimationFrame(animate);\n          } else {\n            element.style.display = 'none';\n            resolve(element);\n          }\n        }\n\n        requestAnimationFrame(animate);\n      });\n    });\n  }\n\n  slide_up(duration: number = 400): Promise<Element> {\n    return new Promise(resolve => {\n      this.each(function() {\n        const element = this as HTMLElement;\n        const height = element.scrollHeight;\n\n        element.style.height = height + 'px';\n        element.style.overflow = 'hidden';\n        element.style.transition = `height ${duration}ms`;\n\n        element.offsetHeight; // Force reflow\n\n        element.style.height = '0px';\n\n        setTimeout(() => {\n          element.style.display = 'none';\n          element.style.height = '';\n          element.style.overflow = '';\n          element.style.transition = '';\n          resolve(element);\n        }, duration);\n      });\n    });\n  }\n\n  slide_down(duration: number = 400): Promise<Element> {\n    return new Promise(resolve => {\n      this.each(function() {\n        const element = this as HTMLElement;\n        element.style.display = '';\n        const height = element.scrollHeight;\n        element.style.height = '0px';\n        element.style.overflow = 'hidden';\n        element.style.transition = `height ${duration}ms`;\n\n        element.offsetHeight; // Force reflow\n\n        element.style.height = height + 'px';\n\n        setTimeout(() => {\n          element.style.height = '';\n          element.style.overflow = '';\n          element.style.transition = '';\n          resolve(element);\n        }, duration);\n      });\n    });\n  }\n\n  animate(props: Record<string, string | number>, duration: number = 400): Promise<Element> {\n    return new Promise(resolve => {\n      this.each(function() {\n        const element = this as HTMLElement;\n        const startValues: { [key: string]: number } = {};\n        const changeValues: { [key: string]: number } = {};\n\n        for (const prop in props) {\n          const value = parseFloat(window.getComputedStyle(element)[prop as any]!) || 0;\n          startValues[prop] = value;\n          changeValues[prop] = parseFloat(props[prop] as string) - value;\n        }\n\n        const start = performance.now();\n\n        function animateStep(time: number) {\n          let timeFraction = (time - start) / duration;\n          if (timeFraction > 1) timeFraction = 1;\n\n          for (const prop in props) {\n            (element.style as any)[prop] = startValues[prop] + changeValues[prop] * timeFraction +\n              (typeof props[prop] === 'string' && (props[prop] as string).includes('px') ? 'px' : '');\n          }\n\n          if (timeFraction < 1) {\n            requestAnimationFrame(animateStep);\n          } else {\n            resolve(element);\n          }\n        }\n\n        requestAnimationFrame(animateStep);\n      });\n    });\n  }\n\n  move(x: number, y: number, duration: number = 300): Promise<Element> {\n    return new Promise(resolve => {\n      this.each(function() {\n        const element = this;\n        (element as HTMLElement).style.transition = `transform ${duration}ms ease-out`;\n        (element as HTMLElement).style.transform = `translate3d(${x}px, ${y}px, 0)`;\n\n        const handleTransitionEnd = () => {\n          element.removeEventListener('transitionend', handleTransitionEnd);\n          resolve(element);\n        };\n        element.addEventListener('transitionend', handleTransitionEnd);\n      });\n    });\n  }\n\n  // Form methods\n  form_data(): object {\n    if (this.elements.length === 0) return {};\n    const form = this.elements[0] as HTMLFormElement;\n    if (form.tagName !== 'FORM') return {};\n\n    const data: { [key: string]: any } = {};\n    const inputs = form.querySelectorAll('input, select, textarea');\n\n    inputs.forEach(input => {\n      const inputEl = input as HTMLInputElement;\n      if (inputEl.name && !inputEl.disabled) {\n        if (inputEl.type === 'checkbox' || inputEl.type === 'radio') {\n          if (inputEl.checked) {\n            if (data[inputEl.name] === undefined) {\n              data[inputEl.name] = inputEl.value;\n            } else if (Array.isArray(data[inputEl.name])) {\n              data[inputEl.name].push(inputEl.value);\n            } else {\n              data[inputEl.name] = [data[inputEl.name], inputEl.value];\n            }\n          }\n        } else if (inputEl.type !== 'file') {\n          data[inputEl.name] = inputEl.value;\n        }\n      }\n    });\n\n    return data;\n  }\n\n  reset(): OneKit {\n    return this.each(function() {\n      if (this.tagName === 'FORM') {\n        (this as HTMLFormElement).reset();\n      }\n    });\n  }\n\n  // Utility methods\n  isVisible(): boolean {\n    if (this.elements.length === 0) return false;\n    const el = this.elements[0];\n    const style = window.getComputedStyle(el);\n    return style.display !== 'none' && style.visibility !== 'hidden' && style.opacity !== '0';\n  }\n\n  inViewport(threshold: number = 0): boolean {\n    if (this.elements.length === 0) return false;\n    const el = this.elements[0];\n    const rect = el.getBoundingClientRect();\n    const windowHeight = window.innerHeight || document.documentElement.clientHeight;\n    const windowWidth = window.innerWidth || document.documentElement.clientWidth;\n\n    const vertInView = (rect.top <= windowHeight * (1 - threshold)) && ((rect.top + rect.height) >= windowHeight * threshold);\n    const horInView = (rect.left <= windowWidth * (1 - threshold)) && ((rect.left + rect.width) >= windowWidth * threshold);\n\n    return vertInView && horInView;\n  }\n\n  getDimensions(): { width: number; height: number; innerWidth: number; innerHeight: number; top: number; left: number } {\n    if (this.elements.length === 0) return { width: 0, height: 0, innerWidth: 0, innerHeight: 0, top: 0, left: 0 };\n    const el = this.elements[0] as HTMLElement;\n    return {\n      width: el.offsetWidth,\n      height: el.offsetHeight,\n      innerWidth: el.clientWidth,\n      innerHeight: el.clientHeight,\n      top: el.offsetTop,\n      left: el.offsetLeft\n    };\n  }\n\n  log(): OneKit {\n    if (this.elements.length > 0) {\n      console.log(this.elements[0]);\n    }\n    return this;\n  }\n\n  info(): OneKit {\n    if (this.elements.length > 0) {\n      console.log({\n        element: this.elements[0],\n        tagName: this.elements[0].tagName,\n        id: this.elements[0].id,\n        className: this.elements[0].className,\n        children: this.elements[0].children.length\n      });\n    }\n    return this;\n  }\n}\n\n// Main function\nexport function ok(selector?: string | Element | NodeList | OneKit | Element[]): OneKit {\n  return new OneKit(selector);\n}\n\n// Module registry\nconst modules: { [key: string]: Function } = {};\n\nok.module = function(name: string, factory: Function) {\n  modules[name] = factory;\n};\n\n// Static cache\nOneKit._cache = new Map<string, any>();\n\n(OneKit as any).clearCache = function() {\n  OneKit._cache.clear();\n};\n\n// Wrap critical methods with safeMethod\nconst criticalMethods = [\n  'find', 'html', 'text', 'attr', 'css', 'append', 'prepend',\n  'remove', 'on', 'off', 'fade_in', 'fade_out', 'slide_up',\n  'slide_down', 'animate', 'move'\n];\n\ncriticalMethods.forEach(methodName => {\n  if ((OneKit.prototype as any)[methodName]) {\n    const originalMethod = (OneKit.prototype as any)[methodName];\n    (OneKit.prototype as any)[methodName] = safeMethod(originalMethod);\n  }\n});\n\n// Initialize modules\nconst moduleNames = ['component', 'reactive', 'vdom', 'animation', 'gesture', 'api', 'utils', 'form', 'plugin', 'a11y', 'theme', 'router', 'storage', 'crypto', 'physics', 'timeline', 'scene3d', 'csp', 'cli', 'stories', 'wasm'];\nmoduleNames.forEach(name => {\n  if (modules[name]) {\n    modules[name]();\n  }\n});\n\n// Global error handlers\nwindow.addEventListener('unhandledrejection', function(event) {\n  errorHandler(event.reason, 'Unhandled Promise Rejection');\n  event.preventDefault();\n});\n\nwindow.addEventListener('error', function(event) {\n  errorHandler(event.error, 'JavaScript Error');\n});\n\n// Expose to global\nif (typeof window !== 'undefined') {\n  (window as any).ok = ok;\n  (window as any).OneKit = OneKit;\n}\n// Core OneKit functionality - Refactored into ES modules\n","// Dependency Injection System\ninterface ServiceDefinition {\n  factory: (...args: unknown[]) => unknown;\n  dependencies?: string[];\n  singleton?: boolean;\n}\n\ninterface ServiceInstance {\n  instance: unknown;\n  singleton: boolean;\n}\n\nclass DependencyInjector {\n  private services: Map<string, ServiceDefinition> = new Map();\n  private instances: Map<string, ServiceInstance> = new Map();\n\n  register(name: string, factory: (...args: unknown[]) => unknown, dependencies: string[] = [], singleton: boolean = true): void {\n    this.services.set(name, { factory, dependencies, singleton });\n  }\n\n  resolve<T>(name: string): T {\n    const service = this.services.get(name);\n    if (!service) {\n      throw new Error(`Service \"${name}\" not registered`);\n    }\n\n    if (service.singleton && this.instances.has(name)) {\n      return this.instances.get(name)!.instance as T;\n    }\n\n    const deps = service.dependencies?.map(dep => this.resolve(dep)) || [];\n    const instance = service.factory(...deps);\n\n    if (service.singleton) {\n      this.instances.set(name, { instance, singleton: true });\n    }\n\n    return instance as T;\n  }\n\n  has(name: string): boolean {\n    return this.services.has(name);\n  }\n\n  clear(): void {\n    this.services.clear();\n    this.instances.clear();\n  }\n}\n\nconst di = new DependencyInjector();\n\nexport { DependencyInjector, di };\nexport type { ServiceDefinition, ServiceInstance };\n","// Plugin Architecture for Extensibility\ninterface Plugin {\n  name: string;\n  version: string;\n  install: (app: any, options?: Record<string, unknown>) => void;\n  uninstall?: (app: any) => void;\n}\n\ninterface PluginManager {\n  register: (plugin: Plugin, options?: Record<string, unknown>) => void;\n  unregister: (name: string) => void;\n  get: (name: string) => Plugin | undefined;\n  list: () => Plugin[];\n  clear: () => void;\n}\n\nclass OneKitPluginManager implements PluginManager {\n  private plugins: Map<string, Plugin> = new Map();\n  private installed: Set<string> = new Set();\n\n  register(plugin: Plugin, options?: Record<string, unknown>): void {\n    if (this.plugins.has(plugin.name)) {\n      console.warn(`Plugin \"${plugin.name}\" is already registered. Overwriting...`);\n    }\n\n    this.plugins.set(plugin.name, plugin);\n\n    // Auto-install if not already installed\n    if (!this.installed.has(plugin.name)) {\n      try {\n        plugin.install({}, options);\n        this.installed.add(plugin.name);\n      } catch (error) {\n        console.error(`Failed to install plugin \"${plugin.name}\":`, error);\n      }\n    }\n  }\n\n  unregister(name: string): void {\n    const plugin = this.plugins.get(name);\n    if (plugin && plugin.uninstall) {\n      try {\n        plugin.uninstall({});\n        this.installed.delete(name);\n      } catch (error) {\n        console.error(`Failed to uninstall plugin \"${name}\":`, error);\n      }\n    }\n    this.plugins.delete(name);\n  }\n\n  get(name: string): Plugin | undefined {\n    return this.plugins.get(name);\n  }\n\n  list(): Plugin[] {\n    return Array.from(this.plugins.values());\n  }\n\n  clear(): void {\n    for (const [name, plugin] of this.plugins) {\n      if (plugin.uninstall && this.installed.has(name)) {\n        try {\n          plugin.uninstall({});\n        } catch (error) {\n          console.error(`Failed to uninstall plugin \"${name}\":`, error);\n        }\n      }\n    }\n    this.plugins.clear();\n    this.installed.clear();\n  }\n}\n\nconst pluginManager = new OneKitPluginManager();\n\nexport { pluginManager };\nexport type { Plugin, PluginManager };\n","// Component System Module\nimport { sanitizeHTML } from '../core/security';\nimport { deepCloneSafe } from '../core/security';\nimport { di } from '../core/di';\n\ninterface ComponentProps {\n  [key: string]: unknown;\n}\n\ninterface ComponentState {\n  [key: string]: unknown;\n}\n\nexport interface ComponentDefinition {\n  name?: string;\n  props?: ComponentProps;\n  data?: () => ComponentState;\n  template?: string;\n  render?: (this: ComponentInstance) => string;\n  methods?: { [key: string]: (...args: unknown[]) => unknown };\n  inject?: string[];\n  beforeCreate?: (this: ComponentInstance) => void;\n  created?: (this: ComponentInstance) => void;\n  beforeMount?: (this: ComponentInstance) => void;\n  mounted?: (this: ComponentInstance) => void;\n  beforeUpdate?: (this: ComponentInstance) => void;\n  updated?: (this: ComponentInstance) => void;\n  beforeUnmount?: (this: ComponentInstance) => void;\n  unmounted?: (this: ComponentInstance) => void;\n}\n\nexport interface ComponentInstance {\n  name: string;\n  props: ComponentProps;\n  slots: { [key: string]: string };\n  state: ComponentState;\n  element: Element | null;\n  mounted: boolean;\n  listeners: unknown[];\n  update: () => void;\n  [key: string]: unknown;\n}\n\nconst components: { [key: string]: ComponentDefinition } = {};\nconst componentInstances = new Map<Element, ComponentInstance>();\n\nexport function register(name: string, definition: ComponentDefinition): void {\n  components[name] = definition;\n}\n\nexport function create(name: string, props: ComponentProps = {}, slots: { [key: string]: string } = {}): ComponentInstance | null {\n  if (!components[name]) {\n    console.error(`Component \"${name}\" not found`);\n    return null;\n  }\n\n  const definition = components[name];\n  const defaultProps = definition.props || {};\n  const finalProps = { ...defaultProps, ...props };\n\n  const instance: ComponentInstance = {\n    name,\n    props: finalProps,\n    slots,\n    state: definition.data ? deepCloneSafe(definition.data()) : {},\n    element: null,\n    mounted: false,\n    listeners: [],\n    update: function() {} // Placeholder, will be overridden\n  };\n\n  // Add methods\n  if (definition.methods) {\n    Object.keys(definition.methods).forEach(method => {\n      instance[method] = function(...args: any[]) {\n        return definition.methods![method].call(instance, ...args);\n      };\n    });\n  }\n\n  // Unified update method for reactive updates\n  instance.update = function() {\n    if (this.element) {\n      if (definition.beforeUpdate) {\n        definition.beforeUpdate.call(this);\n      }\n\n      let html = '';\n      if (definition.template) {\n        html = definition.template.replace(/\\{\\{([^}]+)\\}\\}/g, (match, key) => {\n          const keys = key.trim().split('.');\n          let value: any = this.state;\n          if (keys[0] in this.props) {\n            value = this.props;\n          }\n          for (const k of keys) {\n            value = value && value[k];\n          }\n          return value !== undefined ? value : '';\n        });\n        // Replace slots\n        html = html.replace(/<slot><\\/slot>/gi, this.slots.default || '');\n        html = html.replace(/<slot name=\"([^\"]+)\"><\\/slot>/gi, (match, slotName) => {\n          return this.slots[slotName] || '';\n        });\n      } else if (definition.render) {\n        html = definition.render.call(this);\n      }\n\n      if (html) {\n        // Sanitize HTML before rendering\n        const sanitized = sanitizeHTML(html);\n        const newElement = document.createElement('div');\n        newElement.innerHTML = sanitized;\n        if (this.element.firstChild) {\n          this.element.replaceChild(newElement.firstChild!, this.element.firstChild);\n        } else {\n          this.element.appendChild(newElement.firstChild!);\n        }\n\n        // Re-attach event listeners after update\n        if (definition.methods && this.element) {\n          Object.keys(definition.methods).forEach(method => {\n          const events = this.element!.querySelectorAll(`[data-on-${method}]`);\n            events.forEach((el: Element) => {\n              (el as HTMLElement).addEventListener(method.split('on')[1], (e) => {\n                e.preventDefault();\n                const methodFn = this[method];\n                if (typeof methodFn === 'function') {\n                  methodFn(e);\n                }\n              });\n            });\n          });\n        }\n      }\n\n      definition.updated?.call(this);\n    }\n  };\n\n  // Create element\n  let html = '';\n  if (definition.template) {\n    html = definition.template.replace(/\\{\\{([^}]+)\\}\\}/g, (match, key) => {\n      const keys = key.trim().split('.');\n      let value: any = instance.state;\n      if (keys[0] in instance.props) {\n        value = instance.props;\n      }\n      for (const k of keys) {\n        value = value && value[k];\n      }\n      return value !== undefined ? value : '';\n    });\n    // Replace slots\n    html = html.replace(/<slot><\\/slot>/gi, instance.slots.default || '');\n    html = html.replace(/<slot name=\"([^\"]+)\"><\\/slot>/gi, (match, slotName) => {\n      return instance.slots[slotName] || '';\n    });\n    // Sanitize HTML before creating element\n    const sanitized = sanitizeHTML(html);\n    instance.element = document.createElement('div');\n    instance.element.innerHTML = sanitized;\n    instance.element = instance.element.firstElementChild as Element;\n  } else if (definition.render) {\n    html = definition.render.call(instance);\n    // Sanitize HTML before creating element\n    const sanitized = sanitizeHTML(html);\n    instance.element = document.createElement('div');\n    instance.element.innerHTML = sanitized;\n    instance.element = instance.element.firstElementChild as Element;\n  }\n\n  // Add lifecycle hooks\n  definition.beforeCreate?.call(instance);\n  definition.created?.call(instance);\n\n  // Store instance\n  if (instance.element) {\n    componentInstances.set(instance.element, instance);\n  }\n\n  return instance;\n}\n\nexport function mount(component: ComponentInstance | string, target: string | Element | ShadowRoot): ComponentInstance | null {\n  let comp: ComponentInstance | null;\n  if (typeof component === 'string') {\n    comp = create(component);\n  } else {\n    comp = component;\n  }\n\n  if (!comp || !comp.element) {\n    console.error('Invalid component');\n    return null;\n  }\n\n  const targetElement = typeof target === 'string' ? document.querySelector(target) : target;\n  if (!targetElement) {\n    console.error('Invalid target element');\n    return null;\n  }\n\n  targetElement.appendChild(comp.element);\n  comp.mounted = true;\n\n  const definition = components[comp.name];\n  definition?.mounted?.call(comp);\n\n  return comp;\n}\n\nexport function getInstance(element: Element): ComponentInstance | undefined {\n  return componentInstances.get(element);\n}\n\nexport function destroy(component: ComponentInstance): void {\n  if (!component || !component.element) return;\n\n  const definition = components[component.name];\n  definition?.beforeUnmount?.call(component);\n\n  if (component.element.parentNode) {\n    component.element.parentNode.removeChild(component.element);\n  }\n\n  component.listeners.forEach((listener) => {\n    if (typeof listener === 'object' && listener !== null && 'element' in listener && 'event' in listener && 'handler' in listener) {\n      const { element, event, handler } = listener as { element: Element; event: string; handler: EventListener };\n      element.removeEventListener(event, handler);\n    }\n  });\n\n  componentInstances.delete(component.element);\n  component.mounted = false;\n\n  if (definition && definition.unmounted) {\n    definition.unmounted.call(component);\n  }\n}\n","// Reactive State Management Module\nimport { deepCloneSafe, validateStorageKey } from '../core/security';\n\ninterface ReactiveObject {\n  [key: string]: unknown;\n}\n\ninterface Watcher {\n  callback: (newValue: unknown, oldValue: unknown, property: string | symbol) => void;\n  property: string | symbol;\n}\n\nconst state: ReactiveObject = {};\nconst watchers: { [key: string]: Watcher[] } = {};\n\nexport function reactive(obj: ReactiveObject): ReactiveObject {\n  return new Proxy(obj, {\n    get(target, property) {\n      return target[property as string];\n    },\n    set(target, property, value) {\n      const prop = property as string;\n      const oldValue = target[prop];\n      if (oldValue !== value) {\n        target[prop] = value;\n        if (watchers[prop]) {\n          watchers[prop].forEach(watcher => {\n            watcher.callback(value, oldValue, watcher.property);\n          });\n        }\n      }\n      return true;\n    }\n  });\n}\n\nexport function watch(key: string | symbol, callback: (newValue: unknown, oldValue: unknown, property: string | symbol) => void): () => void {\n  const keyStr = key as string;\n  if (!watchers[keyStr]) {\n    watchers[keyStr] = [];\n  }\n\n  const watcher: Watcher = { callback, property: key };\n  watchers[keyStr].push(watcher);\n\n  return function() {\n    const index = watchers[keyStr].indexOf(watcher);\n    if (index > -1) {\n      watchers[keyStr].splice(index, 1);\n    }\n  };\n}\n\nexport function bind(element: string | Element, reactiveObj: ReactiveObject, property: string, attribute: string = 'value'): void {\n  const el = typeof element === 'string' ? document.querySelector(element) : element;\n  if (!el) return;\n\n  // Validate property to prevent prototype pollution\n  if (!validateStorageKey(property)) {\n    console.error('OneKit Security: Invalid property key (prototype pollution attempt blocked)');\n    return;\n  }\n\n  // Set initial value\n  const initialValue = reactiveObj[property];\n  if (initialValue !== undefined) {\n    (el as HTMLElement & Record<string, unknown>)[attribute] = initialValue;\n  }\n\n  el.addEventListener('input', function(this: HTMLElement) {\n    // Sanitize input value\n    let value = (this as HTMLElement & Record<string, unknown>)[attribute];\n    if (typeof value === 'string') {\n      // For text inputs, sanitize but preserve content\n      value = value.replace(/\\0/g, ''); // Remove null bytes\n    }\n    reactiveObj[property] = value;\n  });\n\n  watch(property, function(newValue: unknown) {\n    // Sanitize output value for HTML attributes\n    if (typeof newValue === 'string' && attribute === 'innerHTML') {\n      (el as HTMLElement & Record<string, unknown>)[attribute] = newValue; // Note: sanitization should be handled by caller\n    } else {\n      (el as HTMLElement & Record<string, unknown>)[attribute] = newValue;\n    }\n  });\n}\n","// Virtual DOM Module\nimport { sanitizeHTML } from '../core/security';\n\nexport interface VNodeProps {\n  [key: string]: unknown;\n}\n\nexport interface VNode {\n  tag: string;\n  props: VNodeProps;\n  children: (VNode | string)[];\n  key?: string;\n}\n\ninterface VElement extends Element {\n  _vnode?: VNode;\n}\n\nexport function createElement(tag: string, props: VNodeProps = {}, ...children: (VNode | string)[]): VNode {\n  return {\n    tag,\n    props: props || {},\n    children: children.flat(),\n    key: typeof props.key === 'string' ? props.key : undefined\n  };\n}\n\nexport function render(vnode: VNode | string): Element | Text {\n  if (typeof vnode === 'string') {\n    return document.createTextNode(vnode);\n  }\n\n  const element = document.createElement(vnode.tag);\n\n  // Set properties\n  for (const prop in vnode.props) {\n    if (prop === 'key') continue;\n\n    const propValue = vnode.props[prop];\n    if (prop.startsWith('on') && typeof propValue === 'function') {\n      element.addEventListener(prop.slice(2).toLowerCase(), propValue as EventListener);\n    } else if (prop === 'className' && typeof propValue === 'string') {\n      element.setAttribute('class', propValue);\n    } else if (prop === 'style' && typeof propValue === 'object' && propValue !== null) {\n      Object.assign((element as HTMLElement).style, propValue);\n    } else if (typeof propValue === 'string') {\n      element.setAttribute(prop, propValue);\n    }\n  }\n\n  // Render children\n  vnode.children.forEach(child => {\n    element.appendChild(render(child));\n  });\n\n  // Store vnode reference\n  (element as VElement)._vnode = vnode;\n\n  return element;\n}\n\nexport function patch(parent: Element, newVNode: VNode | string, oldVNode?: VNode | string): void {\n  const oldElement = parent.firstChild as VElement;\n\n  if (!oldElement) {\n    // No existing element, just render and append\n    parent.appendChild(render(newVNode));\n    return;\n  }\n\n  if (!oldVNode) {\n    // No old vnode, replace entire content\n    parent.innerHTML = '';\n    parent.appendChild(render(newVNode));\n    return;\n  }\n\n  if (typeof newVNode === 'string' && typeof oldVNode === 'string') {\n    // Both are strings, just update text\n    if (newVNode !== oldVNode) {\n      oldElement.textContent = newVNode;\n    }\n    return;\n  }\n\n  if (typeof newVNode === 'string' || typeof oldVNode === 'string') {\n    // One is string, one is vnode, replace\n    parent.replaceChild(render(newVNode), oldElement);\n    return;\n  }\n\n  // Both are vnodes\n  if (newVNode.tag !== oldVNode.tag) {\n    // Different tags, replace\n    parent.replaceChild(render(newVNode), oldElement);\n    return;\n  }\n\n  // Same tag, update props and children\n  updateProps(oldElement, newVNode.props, oldVNode.props);\n  updateChildren(oldElement, newVNode.children, oldVNode.children);\n}\n\nfunction updateProps(element: Element, newProps: VNodeProps, oldProps: VNodeProps): void {\n  // Remove old props\n  for (const prop in oldProps) {\n    if (prop === 'key') continue;\n    if (!(prop in newProps)) {\n      if (prop.startsWith('on')) {\n        // Remove event listener (simplified - in real implementation, store handlers)\n        const oldValue = oldProps[prop];\n        if (typeof oldValue === 'function') {\n          element.removeEventListener(prop.slice(2).toLowerCase(), oldValue as EventListener);\n        }\n      } else {\n        element.removeAttribute(prop);\n      }\n    }\n  }\n\n  // Add/update new props\n  for (const prop in newProps) {\n    if (prop === 'key') continue;\n    const newValue = newProps[prop];\n    const oldValue = oldProps[prop];\n    if (newValue !== oldValue) {\n      if (prop.startsWith('on') && typeof newValue === 'function') {\n        element.addEventListener(prop.slice(2).toLowerCase(), newValue as EventListener);\n      } else if (prop === 'className' && typeof newValue === 'string') {\n        element.setAttribute('class', newValue);\n      } else if (prop === 'style' && typeof newValue === 'object' && newValue !== null) {\n        Object.assign((element as HTMLElement).style, newValue);\n      } else if (typeof newValue === 'string') {\n        element.setAttribute(prop, newValue);\n      }\n    }\n  }\n}\n\nfunction updateChildren(parent: Element, newChildren: (VNode | string)[], oldChildren: (VNode | string)[]): void {\n  const maxLength = Math.max(newChildren.length, oldChildren.length);\n\n  for (let i = 0; i < maxLength; i++) {\n    const newChild = newChildren[i];\n    const oldChild = oldChildren[i];\n\n    if (!newChild && oldChild) {\n      // Remove extra old child\n      parent.removeChild(parent.childNodes[i]);\n    } else if (newChild && !oldChild) {\n      // Add new child\n      parent.appendChild(render(newChild));\n    } else if (newChild && oldChild) {\n      // Update existing child\n      patch(parent.childNodes[i] as Element, newChild, oldChild);\n    }\n  }\n}\n","import { OneKit } from '../core/index';\n\n// Animation methods\nconst animations = {\n  scaleIn(this: OneKit, duration = 300): OneKit {\n    return this.each(function() {\n      const element = this as HTMLElement;\n      element.style.transform = 'scale(0)';\n      element.style.opacity = '0';\n      element.style.transition = `transform ${duration}ms ease-out, opacity ${duration}ms ease-out`;\n\n      element.offsetHeight;\n\n      element.style.transform = 'scale(1)';\n      element.style.opacity = '1';\n\n      setTimeout(() => {\n        element.style.transition = '';\n      }, duration);\n    });\n  },\n\n  scaleOut(this: OneKit, duration = 300): OneKit {\n    return this.each(function() {\n      const element = this as HTMLElement;\n      element.style.transform = 'scale(1)';\n      element.style.opacity = '1';\n      element.style.transition = `transform ${duration}ms ease-in, opacity ${duration}ms ease-in`;\n\n      element.offsetHeight;\n\n      element.style.transform = 'scale(0)';\n      element.style.opacity = '0';\n\n      setTimeout(() => {\n        element.style.transition = '';\n      }, duration);\n    });\n  },\n\n  rotateIn(this: OneKit, duration = 500): OneKit {\n    return this.each(function() {\n      const element = this as HTMLElement;\n      element.style.transform = 'rotate(-180deg) scale(0)';\n      element.style.opacity = '0';\n      element.style.transition = `transform ${duration}ms ease-out, opacity ${duration}ms ease-out`;\n\n      element.offsetHeight;\n\n      element.style.transform = 'rotate(0) scale(1)';\n      element.style.opacity = '1';\n\n      setTimeout(() => {\n        element.style.transition = '';\n      }, duration);\n    });\n  },\n\n  rotateOut(this: OneKit, duration = 500): OneKit {\n    return this.each(function() {\n      const element = this as HTMLElement;\n      element.style.transform = 'rotate(0) scale(1)';\n      element.style.opacity = '1';\n      element.style.transition = `transform ${duration}ms ease-in, opacity ${duration}ms ease-in`;\n\n      element.offsetHeight;\n\n      element.style.transform = 'rotate(180deg) scale(0)';\n      element.style.opacity = '0';\n\n      setTimeout(() => {\n        element.style.transition = '';\n      }, duration);\n    });\n  },\n\n  bounce(this: OneKit, duration = 1000): OneKit {\n    return this.each(function() {\n      const element = this as HTMLElement;\n      element.style.animation = `bounce ${duration}ms ease-in-out`;\n\n      setTimeout(() => {\n        element.style.animation = '';\n      }, duration);\n    });\n  },\n\n  shake(this: OneKit, duration = 500): OneKit {\n    return this.each(function() {\n      const element = this as HTMLElement;\n      element.style.animation = `shake ${duration}ms ease-in-out`;\n\n      setTimeout(() => {\n        element.style.animation = '';\n      }, duration);\n    });\n  },\n\n  slideInLeft(this: OneKit, duration = 400): OneKit {\n    return this.each(function() {\n      const element = this as HTMLElement;\n      element.style.transform = 'translateX(-100%)';\n      element.style.opacity = '0';\n      element.style.transition = `transform ${duration}ms ease-out, opacity ${duration}ms ease-out`;\n\n      element.offsetHeight;\n\n      element.style.transform = 'translateX(0)';\n      element.style.opacity = '1';\n\n      setTimeout(() => {\n        element.style.transition = '';\n      }, duration);\n    });\n  },\n\n  slideInRight(this: OneKit, duration = 400): OneKit {\n    return this.each(function() {\n      const element = this as HTMLElement;\n      element.style.transform = 'translateX(100%)';\n      element.style.opacity = '0';\n      element.style.transition = `transform ${duration}ms ease-out, opacity ${duration}ms ease-out`;\n\n      element.offsetHeight;\n\n      element.style.transform = 'translateX(0)';\n      element.style.opacity = '1';\n\n      setTimeout(() => {\n        element.style.transition = '';\n      }, duration);\n    });\n  },\n\n  slideInUp(this: OneKit, duration = 400): OneKit {\n    return this.each(function() {\n      const element = this as HTMLElement;\n      element.style.transform = 'translateY(100%)';\n      element.style.opacity = '0';\n      element.style.transition = `transform ${duration}ms ease-out, opacity ${duration}ms ease-out`;\n\n      element.offsetHeight;\n\n      element.style.transform = 'translateY(0)';\n      element.style.opacity = '1';\n\n      setTimeout(() => {\n        element.style.transition = '';\n      }, duration);\n    });\n  },\n\n  slideInDown(this: OneKit, duration = 400): OneKit {\n    return this.each(function() {\n      const element = this as HTMLElement;\n      element.style.transform = 'translateY(-100%)';\n      element.style.opacity = '0';\n      element.style.transition = `transform ${duration}ms ease-out, opacity ${duration}ms ease-out`;\n\n      element.offsetHeight;\n\n      element.style.transform = 'translateY(0)';\n      element.style.opacity = '1';\n\n      setTimeout(() => {\n        element.style.transition = '';\n      }, duration);\n    });\n  },\n\n  flip(this: OneKit, duration = 600): OneKit {\n    return this.each(function() {\n      const element = this as HTMLElement;\n      element.style.transform = 'rotateY(0)';\n      element.style.transition = `transform ${duration}ms ease-in-out`;\n\n      element.offsetHeight;\n\n      element.style.transform = 'rotateY(360deg)';\n\n      setTimeout(() => {\n        element.style.transition = '';\n        element.style.transform = '';\n      }, duration);\n    });\n  },\n\n  pulse(this: OneKit, duration = 1000, iterations = 1): OneKit {\n    return this.each(function() {\n      const element = this as HTMLElement;\n      element.style.animation = `pulse ${duration}ms ease-in-out ${iterations}`;\n\n      setTimeout(() => {\n        element.style.animation = '';\n      }, duration * iterations);\n    });\n  },\n\n  glow(this: OneKit, duration = 1000, color = '#ffff00'): OneKit {\n    return this.each(function() {\n      const element = this as HTMLElement;\n      element.style.boxShadow = `0 0 5px ${color}`;\n      element.style.transition = `box-shadow ${duration}ms ease-in-out`;\n\n      element.offsetHeight;\n\n      element.style.boxShadow = `0 0 20px ${color}, 0 0 30px ${color}`;\n\n      setTimeout(() => {\n        element.style.boxShadow = `0 0 5px ${color}`;\n        setTimeout(() => {\n          element.style.transition = '';\n          element.style.boxShadow = '';\n        }, duration);\n      }, duration);\n    });\n  }\n};\n\n// Add CSS animations\nconst style = document.createElement('style');\nstyle.textContent = `\n  @keyframes bounce { 0%, 20%, 53%, 80%, 100% { transform: translate3d(0, 0, 0); } 40%, 43% { transform: translate3d(0, -30px, 0); } 70% { transform: translate3d(0, -15px, 0); } 90% { transform: translate3d(0, -4px, 0); } }\n  @keyframes shake { 0%, 100% { transform: translate3d(0, 0, 0); } 10%, 30%, 50%, 70%, 90% { transform: translate3d(-10px, 0, 0); } 20%, 40%, 60%, 80% { transform: translate3d(10px, 0, 0); } }\n  @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }\n`;\ndocument.head.appendChild(style);\n\n// Add animations to OneKit prototype\nObject.keys(animations).forEach(name => {\n  (OneKit.prototype as any)[name] = animations[name as keyof typeof animations];\n});\n\nexport { animations };\n","// HTTP/API Module\nimport { errorHandler } from '../core/error-handler';\nimport { sanitizeURL } from '../core/security';\n\ninterface RequestOptions {\n  method?: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';\n  headers?: { [key: string]: string };\n  body?: any;\n  timeout?: number;\n  retries?: number;\n  retryDelay?: number;\n  onProgress?: (progress: number) => void;\n}\n\ninterface ResponseData {\n  status: number;\n  statusText: string;\n  headers: { [key: string]: string };\n  data: any;\n  url: string;\n}\n\nconst defaultHeaders = {\n  'Content-Type': 'application/json',\n  'X-Requested-With': 'XMLHttpRequest'\n};\n\nexport function request(url: string, options: RequestOptions = {}): Promise<ResponseData> {\n  return new Promise((resolve, reject) => {\n    // Sanitize URL to prevent XSS\n    const sanitizedUrl = sanitizeURL(url);\n    if (!sanitizedUrl) {\n      reject(new Error('Invalid URL'));\n      return;\n    }\n\n    const config: RequestOptions = {\n      method: 'GET',\n      headers: { ...defaultHeaders },\n      timeout: 30000,\n      retries: 0,\n      retryDelay: 1000,\n      ...options\n    };\n\n    const makeRequest = (attempt: number = 0) => {\n      const xhr = new XMLHttpRequest();\n\n      // Set up timeout\n      const timeoutId = setTimeout(() => {\n        xhr.abort();\n        reject(new Error('Request timeout'));\n      }, config.timeout);\n\n      xhr.open(config.method!, sanitizedUrl);\n\n      // Set headers\n      for (const header in config.headers) {\n        xhr.setRequestHeader(header, config.headers![header]);\n      }\n\n      // Progress tracking\n      if (config.onProgress) {\n        xhr.addEventListener('progress', (e) => {\n          if (e.lengthComputable) {\n            config.onProgress!(e.loaded / e.total);\n          }\n        });\n      }\n\n      xhr.onload = function() {\n        clearTimeout(timeoutId);\n\n        const response: ResponseData = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders()),\n          data: null,\n          url: xhr.responseURL\n        };\n\n        try {\n          // Try to parse JSON response\n          if (xhr.responseText) {\n            response.data = JSON.parse(xhr.responseText);\n          }\n        } catch (e) {\n          // If not JSON, return as text\n          response.data = xhr.responseText;\n        }\n\n        if (xhr.status >= 200 && xhr.status < 300) {\n          resolve(response);\n        } else {\n          const error = new Error(`HTTP ${xhr.status}: ${xhr.statusText}`);\n          (error as any).response = response;\n\n          if (attempt < (config.retries || 0)) {\n            setTimeout(() => makeRequest(attempt + 1), config.retryDelay);\n          } else {\n            reject(error);\n          }\n        }\n      };\n\n      xhr.onerror = function() {\n        clearTimeout(timeoutId);\n\n        if (attempt < (config.retries || 0)) {\n          setTimeout(() => makeRequest(attempt + 1), config.retryDelay);\n        } else {\n          reject(new Error('Network error'));\n        }\n      };\n\n      // Send request\n      if (config.body && typeof config.body === 'object') {\n        xhr.send(JSON.stringify(config.body));\n      } else {\n        xhr.send(config.body);\n      }\n    };\n\n    makeRequest();\n  });\n}\n\nexport function get(url: string, options: Omit<RequestOptions, 'method' | 'body'> = {}): Promise<ResponseData> {\n  return request(url, { ...options, method: 'GET' });\n}\n\nexport function post(url: string, data?: any, options: Omit<RequestOptions, 'method' | 'body'> = {}): Promise<ResponseData> {\n  return request(url, { ...options, method: 'POST', body: data });\n}\n\nexport function put(url: string, data?: any, options: Omit<RequestOptions, 'method' | 'body'> = {}): Promise<ResponseData> {\n  return request(url, { ...options, method: 'PUT', body: data });\n}\n\nexport function del(url: string, options: Omit<RequestOptions, 'method' | 'body'> = {}): Promise<ResponseData> {\n  return request(url, { ...options, method: 'DELETE' });\n}\n\nexport function patch(url: string, data?: any, options: Omit<RequestOptions, 'method' | 'body'> = {}): Promise<ResponseData> {\n  return request(url, { ...options, method: 'PATCH', body: data });\n}\n\nfunction parseHeaders(headerString: string): { [key: string]: string } {\n  const headers: { [key: string]: string } = {};\n  const lines = headerString.split('\\n');\n\n  for (const line of lines) {\n    const index = line.indexOf(':');\n    if (index > 0) {\n      const name = line.slice(0, index).trim().toLowerCase();\n      const value = line.slice(index + 1).trim();\n      headers[name] = value;\n    }\n  }\n\n  return headers;\n}\n\n// RESTful API helper\nexport class API {\n  private baseURL: string;\n  private defaultOptions: RequestOptions;\n\n  constructor(baseURL: string, defaultOptions: RequestOptions = {}) {\n    this.baseURL = baseURL.replace(/\\/$/, ''); // Remove trailing slash\n    this.defaultOptions = defaultOptions;\n  }\n\n  private buildURL(endpoint: string): string {\n    return `${this.baseURL}${endpoint.startsWith('/') ? endpoint : '/' + endpoint}`;\n  }\n\n  get(endpoint: string, options: RequestOptions = {}): Promise<ResponseData> {\n    return request(this.buildURL(endpoint), { ...this.defaultOptions, ...options, method: 'GET' });\n  }\n\n  post(endpoint: string, data?: any, options: RequestOptions = {}): Promise<ResponseData> {\n    return request(this.buildURL(endpoint), { ...this.defaultOptions, ...options, method: 'POST', body: data });\n  }\n\n  put(endpoint: string, data?: any, options: RequestOptions = {}): Promise<ResponseData> {\n    return request(this.buildURL(endpoint), { ...this.defaultOptions, ...options, method: 'PUT', body: data });\n  }\n\n  delete(endpoint: string, options: RequestOptions = {}): Promise<ResponseData> {\n    return request(this.buildURL(endpoint), { ...this.defaultOptions, ...options, method: 'DELETE' });\n  }\n\n  patch(endpoint: string, data?: any, options: RequestOptions = {}): Promise<ResponseData> {\n    return request(this.buildURL(endpoint), { ...this.defaultOptions, ...options, method: 'PATCH', body: data });\n  }\n}\n","/**\n * Router module for OneKit\n * Handles client-side routing functionality\n */\n\nexport interface Route {\n  path: string;\n  component?: any;\n  handler?: () => void;\n}\n\nexport class Router {\n  private routes: Route[] = [];\n\n  addRoute(route: Route): void {\n    this.routes.push(route);\n  }\n\n  navigate(path: string): void {\n    // Basic navigation logic\n    const route = this.routes.find(r => r.path === path);\n    if (route?.handler) {\n      route.handler();\n    }\n  }\n\n  getCurrentPath(): string {\n    return window.location.pathname;\n  }\n}\n\nexport const router = new Router();\n","// Storage Utilities Module\nimport { validateStorageKey } from '../core/security';\nimport { errorHandler } from '../core/error-handler';\n\ninterface StorageOptions {\n  prefix?: string;\n  serialize?: (value: any) => string;\n  deserialize?: (value: string) => any;\n  ttl?: number; // Time to live in milliseconds\n}\n\nclass Storage {\n  private storage: globalThis.Storage;\n  private options: Required<StorageOptions>;\n\n  constructor(storage: globalThis.Storage, options: StorageOptions = {}) {\n    this.storage = storage;\n    this.options = {\n      prefix: options.prefix || '',\n      serialize: options.serialize || JSON.stringify,\n      deserialize: options.deserialize || JSON.parse,\n      ttl: options.ttl || 0\n    };\n  }\n\n  private getKey(key: string): string {\n    return this.options.prefix + key;\n  }\n\n  private isExpired(timestamp: number): boolean {\n    return this.options.ttl > 0 && Date.now() - timestamp > this.options.ttl;\n  }\n\n  set<T>(key: string, value: T): boolean {\n    try {\n      // Validate key to prevent prototype pollution\n      if (!validateStorageKey(key)) {\n        console.error('OneKit Security: Invalid storage key (prototype pollution attempt blocked)');\n        return false;\n      }\n\n      const data = {\n        value: this.options.serialize(value),\n        timestamp: Date.now()\n      };\n\n      this.storage.setItem(this.getKey(key), JSON.stringify(data));\n      return true;\n    } catch (error) {\n      errorHandler(error, 'Storage.set');\n      return false;\n    }\n  }\n\n  get(key: string, defaultValue?: any): any {\n    try {\n      // Validate key to prevent prototype pollution\n      if (!validateStorageKey(key)) {\n        console.error('OneKit Security: Invalid storage key (prototype pollution attempt blocked)');\n        return defaultValue;\n      }\n\n      const item = this.storage.getItem(this.getKey(key));\n      if (!item) {\n        return defaultValue;\n      }\n\n      const data = JSON.parse(item);\n\n      // Check TTL\n      if (this.isExpired(data.timestamp)) {\n        this.remove(key);\n        return defaultValue;\n      }\n\n      return this.options.deserialize(data.value);\n    } catch (error) {\n      errorHandler(error, 'Storage.get');\n      return defaultValue;\n    }\n  }\n\n  remove(key: string): boolean {\n    try {\n      // Validate key to prevent prototype pollution\n      if (!validateStorageKey(key)) {\n        console.error('OneKit Security: Invalid storage key (prototype pollution attempt blocked)');\n        return false;\n      }\n\n      this.storage.removeItem(this.getKey(key));\n      return true;\n    } catch (error) {\n      errorHandler(error, 'Storage.remove');\n      return false;\n    }\n  }\n\n  clear(): boolean {\n    try {\n      // Only clear items with our prefix\n      const keysToRemove: string[] = [];\n      for (let i = 0; i < this.storage.length; i++) {\n        const key = this.storage.key(i);\n        if (key && key.startsWith(this.options.prefix)) {\n          keysToRemove.push(key);\n        }\n      }\n\n      keysToRemove.forEach(key => this.storage.removeItem(key));\n      return true;\n    } catch (error) {\n      errorHandler(error, 'Storage.clear');\n      return false;\n    }\n  }\n\n  has(key: string): boolean {\n    try {\n      // Validate key to prevent prototype pollution\n      if (!validateStorageKey(key)) {\n        return false;\n      }\n\n      const item = this.storage.getItem(this.getKey(key));\n      if (!item) {\n        return false;\n      }\n\n      const data = JSON.parse(item);\n      return !this.isExpired(data.timestamp);\n    } catch (error) {\n      return false;\n    }\n  }\n\n  keys(): string[] {\n    try {\n      const keys: string[] = [];\n      for (let i = 0; i < this.storage.length; i++) {\n        const key = this.storage.key(i);\n        if (key && key.startsWith(this.options.prefix)) {\n          const cleanKey = key.slice(this.options.prefix.length);\n          // Check if not expired\n          const item = this.storage.getItem(key);\n          if (item) {\n            const data = JSON.parse(item);\n            if (!this.isExpired(data.timestamp)) {\n              keys.push(cleanKey);\n            }\n          }\n        }\n      }\n      return keys;\n    } catch (error) {\n      errorHandler(error, 'Storage.keys');\n      return [];\n    }\n  }\n\n  size(): number {\n    return this.keys().length;\n  }\n}\n\n// Pre-configured storage instances\nexport const localStorage = new Storage(window.localStorage, { prefix: 'onekit_' });\nexport const sessionStorage = new Storage(window.sessionStorage, { prefix: 'onekit_' });\n\n// Utility functions\nexport function createStorage(storage: globalThis.Storage, options?: StorageOptions): Storage {\n  return new Storage(storage, options);\n}\n\n// Cache with TTL\nexport const cache = new Storage(window.sessionStorage, {\n  prefix: 'onekit_cache_',\n  ttl: 5 * 60 * 1000 // 5 minutes\n});\n","/**\n * Utility functions for OneKit\n */\n\n/**\n * Debounce function calls\n */\nexport function debounce<T extends (...args: any[]) => any>(\n  func: T,\n  wait: number\n): (...args: Parameters<T>) => void {\n  let timeout: NodeJS.Timeout;\n  return (...args: Parameters<T>) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func(...args), wait);\n  };\n}\n\n/**\n * Throttle function calls\n */\nexport function throttle<T extends (...args: any[]) => any>(\n  func: T,\n  limit: number\n): (...args: Parameters<T>) => void {\n  let inThrottle: boolean;\n  return (...args: Parameters<T>) => {\n    if (!inThrottle) {\n      func(...args);\n      inThrottle = true;\n      setTimeout(() => inThrottle = false, limit);\n    }\n  };\n}\n\n/**\n * Deep clone an object\n */\nexport function deepClone<T>(obj: T): T {\n  if (obj === null || typeof obj !== 'object') return obj;\n  if (obj instanceof Date) return new Date(obj.getTime()) as unknown as T;\n  if (Array.isArray(obj)) return obj.map(item => deepClone(item)) as unknown as T;\n  const cloned = {} as T;\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      cloned[key] = deepClone(obj[key]);\n    }\n  }\n  return cloned;\n}\n\n/**\n * Generate a unique ID\n */\nexport function generateId(): string {\n  return Math.random().toString(36).substr(2, 9);\n}\n","// Accessibility Helpers Module\nimport { errorHandler } from '../core/error-handler';\n\ninterface AriaAttributes {\n  'aria-label'?: string;\n  'aria-labelledby'?: string;\n  'aria-describedby'?: string;\n  'aria-expanded'?: boolean;\n  'aria-hidden'?: boolean;\n  'aria-live'?: 'off' | 'polite' | 'assertive';\n  'aria-atomic'?: boolean;\n  'aria-relevant'?: string;\n  'aria-busy'?: boolean;\n  'aria-disabled'?: boolean;\n  'aria-required'?: boolean;\n  'aria-invalid'?: boolean;\n  'aria-haspopup'?: boolean | 'menu' | 'listbox' | 'tree' | 'grid' | 'dialog';\n  'aria-controls'?: string;\n  'aria-activedescendant'?: string;\n  'aria-autocomplete'?: 'none' | 'inline' | 'list' | 'both';\n  'aria-readonly'?: boolean;\n  'aria-multiselectable'?: boolean;\n  'aria-valuemin'?: number;\n  'aria-valuemax'?: number;\n  'aria-valuenow'?: number;\n  'aria-valuetext'?: string;\n  'aria-orientation'?: 'horizontal' | 'vertical';\n  'aria-level'?: number;\n  'aria-posinset'?: number;\n  'aria-setsize'?: number;\n  'aria-sort'?: 'none' | 'ascending' | 'descending' | 'other';\n  'aria-pressed'?: boolean | 'mixed';\n  'aria-checked'?: boolean | 'mixed';\n  'aria-selected'?: boolean | 'mixed';\n  'role'?: string;\n  tabindex?: number;\n}\n\ninterface AccessibilityValidationResult {\n  errors: string[];\n  warnings: string[];\n}\n\nexport function setAriaAttributes(element: Element, attributes: AriaAttributes): void {\n  try {\n    for (const [attr, value] of Object.entries(attributes)) {\n      if (value === null || value === undefined) {\n        element.removeAttribute(attr);\n      } else {\n        element.setAttribute(attr, String(value));\n      }\n    }\n  } catch (error) {\n    errorHandler(error, 'setAriaAttributes');\n  }\n}\n\nexport function announce(message: string, priority: 'polite' | 'assertive' = 'polite'): void {\n  try {\n    let announcer = document.getElementById('onekit-a11y-announcer');\n    if (!announcer) {\n      announcer = document.createElement('div');\n      announcer.id = 'onekit-a11y-announcer';\n      announcer.setAttribute('aria-live', priority);\n      announcer.setAttribute('aria-atomic', 'true');\n      announcer.style.position = 'absolute';\n      announcer.style.left = '-10000px';\n      announcer.style.width = '1px';\n      announcer.style.height = '1px';\n      announcer.style.overflow = 'hidden';\n      document.body.appendChild(announcer);\n    }\n\n    announcer.setAttribute('aria-live', priority);\n    announcer.textContent = message;\n  } catch (error) {\n    errorHandler(error, 'announce');\n  }\n}\n\nexport function trapFocus(container: Element): () => void {\n  try {\n    const focusableElements = container.querySelectorAll(\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n    );\n\n    const firstElement = focusableElements[0] as HTMLElement;\n    const lastElement = focusableElements[focusableElements.length - 1] as HTMLElement;\n\n    function handleKeyDown(e: KeyboardEvent) {\n      if (e.key === 'Tab') {\n        if (e.shiftKey) {\n          if (document.activeElement === firstElement) {\n            e.preventDefault();\n            lastElement.focus();\n          }\n        } else {\n          if (document.activeElement === lastElement) {\n            e.preventDefault();\n            firstElement.focus();\n          }\n        }\n      }\n    }\n\n    container.addEventListener('keydown', handleKeyDown as EventListener);\n\n    // Focus first element\n    if (firstElement) {\n      firstElement.focus();\n    }\n\n    // Return cleanup function\n    return () => {\n      container.removeEventListener('keydown', handleKeyDown as EventListener);\n    };\n  } catch (error) {\n    errorHandler(error, 'trapFocus');\n    return () => {};\n  }\n}\n\nexport function makeFocusable(element: Element): void {\n  try {\n    element.setAttribute('tabindex', '0');\n  } catch (error) {\n    errorHandler(error, 'makeFocusable');\n  }\n}\n\nexport function makeUnfocusable(element: Element): void {\n  try {\n    element.setAttribute('tabindex', '-1');\n  } catch (error) {\n    errorHandler(error, 'makeUnfocusable');\n  }\n}\n\nexport function skipToContent(targetId: string): void {\n  try {\n    const target = document.getElementById(targetId);\n    if (target) {\n      target.focus();\n      target.scrollIntoView();\n    }\n  } catch (error) {\n    errorHandler(error, 'skipToContent');\n  }\n}\n\nexport function createSkipLink(href: string, text: string = 'Skip to main content'): HTMLAnchorElement {\n  try {\n    const link = document.createElement('a');\n    link.href = href;\n    link.textContent = text;\n    link.className = 'skip-link';\n    link.style.cssText = `\n      position: absolute;\n      top: -40px;\n      left: 6px;\n      background: #000;\n      color: #fff;\n      padding: 8px;\n      text-decoration: none;\n      z-index: 100;\n      transition: top 0.3s;\n    `;\n\n    link.addEventListener('focus', () => {\n      link.style.top = '6px';\n    });\n\n    link.addEventListener('blur', () => {\n      link.style.top = '-40px';\n    });\n\n    return link;\n  } catch (error) {\n    errorHandler(error, 'createSkipLink');\n    return document.createElement('a');\n  }\n}\n\nexport function manageTabOrder(container: Element, enabled: boolean = true): void {\n  try {\n    const focusableElements = container.querySelectorAll(\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n    );\n\n    focusableElements.forEach(element => {\n      if (enabled) {\n        if (element.hasAttribute('data-original-tabindex')) {\n          element.setAttribute('tabindex', element.getAttribute('data-original-tabindex')!);\n          element.removeAttribute('data-original-tabindex');\n        }\n      } else {\n        if (!element.hasAttribute('data-original-tabindex')) {\n          element.setAttribute('data-original-tabindex', element.getAttribute('tabindex') || '0');\n        }\n        element.setAttribute('tabindex', '-1');\n      }\n    });\n  } catch (error) {\n    errorHandler(error, 'manageTabOrder');\n  }\n}\n\nexport function createLandmarks(): void {\n  try {\n    // Ensure common landmarks exist\n    const landmarks = [\n      { id: 'main', role: 'main', selector: 'main, [role=\"main\"]' },\n      { id: 'navigation', role: 'navigation', selector: 'nav, [role=\"navigation\"]' },\n      { id: 'banner', role: 'banner', selector: 'header, [role=\"banner\"]' },\n      { id: 'contentinfo', role: 'contentinfo', selector: 'footer, [role=\"contentinfo\"]' }\n    ];\n\n    landmarks.forEach(({ id, role, selector }) => {\n      if (!document.getElementById(id)) {\n        const element = document.querySelector(selector);\n        if (element && !element.hasAttribute('role')) {\n          element.id = id;\n          element.setAttribute('role', role);\n        }\n      }\n    });\n  } catch (error) {\n    errorHandler(error, 'createLandmarks');\n  }\n}\n\nexport function validateAccessibility(element: Element): AccessibilityValidationResult {\n  const errors: string[] = [];\n  const warnings: string[] = [];\n\n  try {\n    // Check for alt text on images\n    const images = element.querySelectorAll('img');\n    images.forEach(img => {\n      if (!img.hasAttribute('alt')) {\n        errors.push('Image missing alt attribute');\n      }\n    });\n\n    // Check for labels on form inputs\n    const inputs = element.querySelectorAll('input, select, textarea');\n    inputs.forEach(input => {\n      const id = input.id;\n      const label = element.querySelector(`label[for=\"${id}\"]`);\n      if (!label && !input.hasAttribute('aria-label') && !input.hasAttribute('aria-labelledby')) {\n        warnings.push('Form input may be missing a label');\n      }\n    });\n\n    // Check for heading hierarchy\n    const headings = element.querySelectorAll('h1, h2, h3, h4, h5, h6');\n    let lastLevel = 0;\n    headings.forEach(heading => {\n      const level = parseInt(heading.tagName.charAt(1));\n      if (level - lastLevel > 1) {\n        warnings.push('Heading hierarchy may be broken');\n      }\n      lastLevel = level;\n    });\n\n    // Check for color contrast (basic check)\n    const elementsWithColor = element.querySelectorAll('[style*=\"color\"], [style*=\"background\"]');\n    if (elementsWithColor.length > 0) {\n      warnings.push('Manual color contrast check recommended for styled elements');\n    }\n\n  } catch (error) {\n    errorHandler(error, 'validateAccessibility');\n  }\n\n  return { errors, warnings };\n}\n","// OneKit - Modern JavaScript Framework\n// Main entry point with tree-shaking friendly exports\n\n// Core systems\nexport * from './core/index';\nexport * from './core/di';\nexport * from './core/plugin';\n\n// Feature modules\nexport * from './modules/component';\nexport * from './modules/reactive';\nexport { createElement, render, patch as vdomPatch } from './modules/vdom';\nexport * from './modules/animation';\nexport { request, get, post, put, del, API, patch as apiPatch } from './modules/api';\nexport * from './modules/router';\nexport * from './modules/storage';\nexport * from './modules/utils';\nexport * from './modules/a11y';\n\n// Version info\nexport const VERSION = '3.0.0-alpha';\n"],"names":["errorHandler","error","context","console","event","CustomEvent","detail","bubbles","cancelable","document","dispatchEvent","securityConfig","ALLOWED_TAGS","ALLOWED_ATTRIBUTES","enableSanitization","enableValidation","sanitizeHTML","html","div","createElement","innerHTML","sanitizeNode","node","nodeType","Node","ELEMENT_NODE","element","tagName","toLowerCase","includes","remove","attributes","Array","from","attr","attrName","name","attrValue","value","isDangerous","some","pattern","test","allowed","endsWith","startsWith","slice","removeAttribute","children","childNodes","child","TEXT_NODE","textContent","replace","deepCloneSafe","obj","Date","RegExp","isArray","map","item","cloned","key","hasOwnProperty","validateStorageKey","length","OneKit","elements","static","Map","constructor","selector","Element","this","push","validateSelector","charAt","sanitized","i","querySelectorAll","NodeList","first","last","each","callback","call","find","found","className","classList","add","unclass","split","join","toggleClass","toggle","classes","existingIndex","indexOf","splice","content","undefined","text","setAttribute","getAttribute","unattr","css","prop","style","window","getComputedStyle","getPropertyValue","show","display","hide","clone","cloneNode","parent","parentNode","kids","sibs","siblings","matches","append","insertAdjacentHTML","appendChild","prepend","insertBefore","firstChild","removeChild","on","handler","addEventListener","e","target","off","removeEventListener","click","hover","enterHandler","leaveHandler","focus","fade_in","duration","Promise","resolve","opacity","start","performance","now","requestAnimationFrame","animate","time","timeFraction","toString","fade_out","startOpacity","parseFloat","slide_up","height","scrollHeight","overflow","transition","offsetHeight","setTimeout","slide_down","props","startValues","changeValues","animateStep","move","x","y","transform","handleTransitionEnd","form_data","form","data","forEach","input","inputEl","disabled","type","checked","reset","isVisible","el","visibility","inViewport","threshold","rect","getBoundingClientRect","windowHeight","innerHeight","documentElement","clientHeight","windowWidth","innerWidth","clientWidth","vertInView","top","horInView","left","width","getDimensions","offsetWidth","offsetTop","offsetLeft","log","info","id","ok","modules","module","factory","_cache","clearCache","clear","methodName","prototype","originalMethod","method","args","apply","reason","preventDefault","DependencyInjector","services","instances","register","dependencies","singleton","set","service","get","Error","has","instance","deps","dep","di","pluginManager","plugins","installed","Set","plugin","options","warn","install","unregister","uninstall","delete","list","values","components","componentInstances","definition","create","slots","state","mounted","listeners","update","methods","Object","keys","beforeUpdate","template","match","trim","k","default","slotName","render","newElement","replaceChild","methodFn","updated","firstElementChild","beforeCreate","created","mount","component","comp","targetElement","querySelector","getInstance","destroy","beforeUnmount","listener","unmounted","watchers","reactive","Proxy","property","oldValue","watcher","watch","keyStr","index","bind","reactiveObj","attribute","initialValue","newValue","tag","flat","vnode","createTextNode","propValue","assign","_vnode","patch","newVNode","oldVNode","oldElement","newProps","oldProps","updateProps","newChildren","oldChildren","maxLength","Math","max","newChild","oldChild","updateChildren","animations","scaleIn","scaleOut","rotateIn","rotateOut","bounce","animation","shake","slideInLeft","slideInRight","slideInUp","slideInDown","flip","pulse","iterations","glow","color","boxShadow","head","defaultHeaders","request","url","reject","sanitizedUrl","parsed","URL","location","origin","protocol","href","sanitizeURL","config","headers","timeout","retries","retryDelay","makeRequest","attempt","xhr","XMLHttpRequest","timeoutId","abort","open","header","setRequestHeader","onProgress","lengthComputable","loaded","total","onload","clearTimeout","response","status","statusText","parseHeaders","getAllResponseHeaders","responseURL","responseText","JSON","parse","onerror","body","send","stringify","post","put","del","headerString","lines","line","API","baseURL","defaultOptions","buildURL","endpoint","Router","routes","addRoute","route","navigate","path","r","getCurrentPath","pathname","router","Storage","storage","prefix","serialize","deserialize","ttl","getKey","isExpired","timestamp","setItem","defaultValue","getItem","removeItem","keysToRemove","cleanKey","size","localStorage","sessionStorage","createStorage","cache","debounce","func","wait","throttle","limit","inThrottle","deepClone","getTime","generateId","random","substr","setAriaAttributes","entries","String","announce","message","priority","announcer","getElementById","position","trapFocus","container","focusableElements","firstElement","lastElement","handleKeyDown","shiftKey","activeElement","makeFocusable","makeUnfocusable","skipToContent","targetId","scrollIntoView","createSkipLink","link","cssText","manageTabOrder","enabled","hasAttribute","createLandmarks","role","validateAccessibility","errors","warnings","img","headings","lastLevel","heading","level","parseInt","VERSION"],"mappings":"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"}