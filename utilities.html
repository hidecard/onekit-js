<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>OneKit Utilities</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .demo { margin: 20px 0; padding: 10px; border: 1px solid #ccc; }
        button { margin: 5px; padding: 5px 10px; }
        #debounce-log, #throttle-log { background: #f9f9f9; padding: 10px; margin: 10px 0; height: 100px; overflow-y: auto; }
        #result { background: #f9f9f9; padding: 10px; margin: 10px 0; white-space: pre-wrap; }
    </style>
</head>
<body>
    <h1>OneKit Utilities Demo</h1>

    <div class="demo">
        <h2>Debounce & Throttle</h2>
        <button id="debounce-btn">Debounce Test (300ms)</button>
        <button id="throttle-btn">Throttle Test (1000ms)</button>
        <div id="debounce-log"></div>
        <div id="throttle-log"></div>
    </div>

    <div class="demo">
        <h2>Object Utilities</h2>
        <button id="clone-btn">Deep Clone Object</button>
        <button id="merge-btn">Deep Merge Objects</button>
        <div id="object-result"></div>
    </div>

    <div class="demo">
        <h2>URL Utilities</h2>
        <button id="build-url">Build URL with Params</button>
        <button id="parse-query">Parse Query String</button>
        <div id="url-result"></div>
    </div>

    <div class="demo">
        <h2>Date Formatting</h2>
        <button id="format-date">Format Current Date</button>
        <div id="date-result"></div>
    </div>

    <script src="./onekit.js"></script>
    <script>
        // Debounce & Throttle
        const debouncedFn = ok.utils.debounce(function() {
            ok('#debounce-log').append('<div>Debounced function called</div>');
            ok('#debounce-log').elements[0].scrollTop = ok('#debounce-log').elements[0].scrollHeight;
        }, 300);

        const throttledFn = ok.utils.throttle(function() {
            ok('#throttle-log').append('<div>Throttled function called</div>');
            ok('#throttle-log').elements[0].scrollTop = ok('#throttle-log').elements[0].scrollHeight;
        }, 1000);

        ok('#debounce-btn').click(debouncedFn);
        ok('#throttle-btn').click(throttledFn);

        // Object utilities
        ok('#clone-btn').click(function() {
            const original = { a: 1, b: { c: 2 }, d: [3, 4] };
            const cloned = ok.utils.deepClone(original);
            cloned.b.c = 999;
            ok('#object-result').html('<pre>Original: ' + JSON.stringify(original, null, 2) + '\n\nCloned & Modified: ' + JSON.stringify(cloned, null, 2) + '</pre>');
        });

        ok('#merge-btn').click(function() {
            const obj1 = { a: 1, b: { c: 2 } };
            const obj2 = { b: { d: 3 }, e: 4 };
            const merged = ok.utils.deepMerge(obj1, obj2);
            ok('#object-result').html('<pre>Merged: ' + JSON.stringify(merged, null, 2) + '</pre>');
        });

        // URL utilities
        ok('#build-url').click(function() {
            const url = ok.utils.url('/api/data', { page: 1, limit: 10, sort: 'name' });
            ok('#url-result').text('Built URL: ' + url);
        });

        ok('#parse-query').click(function() {
            const params = ok.utils.parseQuery('?page=1&limit=10&sort=name');
            ok('#url-result').html('<pre>Parsed Params: ' + JSON.stringify(params, null, 2) + '</pre>');
        });

        // Date formatting
        ok('#format-date').click(function() {
            const formatted = ok.utils.formatDate(new Date(), 'YYYY-MM-DD HH:mm:ss');
            ok('#date-result').text('Formatted Date: ' + formatted);
        });
    </script>
</body>
</html>
