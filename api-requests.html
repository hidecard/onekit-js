<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>OneKit API Requests</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .demo { margin: 20px 0; padding: 10px; border: 1px solid #ccc; }
        button { margin: 5px; padding: 5px 10px; }
        #result { background: #f9f9f9; padding: 10px; margin: 10px 0; white-space: pre-wrap; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <h1>OneKit API Requests Demo</h1>

    <div class="demo">
        <h2>HTTP Requests</h2>
        <button id="get-request">GET Request</button>
        <button id="post-request">POST Request</button>
        <button id="put-request">PUT Request</button>
        <button id="delete-request">DELETE Request</button>
        <div id="http-result"></div>
    </div>

    <div class="demo">
        <h2>WebSocket</h2>
        <button id="connect-ws">Connect WebSocket</button>
        <button id="send-ws">Send Message</button>
        <button id="disconnect-ws">Disconnect</button>
        <div id="ws-status">Status: Disconnected</div>
        <div id="ws-result"></div>
    </div>

    <script src="./onekit.js"></script>
    <script>
        // HTTP Requests (using JSONPlaceholder for demo)
        ok('#get-request').click(function() {
            ok.http.get('https://jsonplaceholder.typicode.com/posts/1')
                .then(data => {
                    ok('#http-result').html('<pre>' + JSON.stringify(data, null, 2) + '</pre>');
                })
                .catch(error => {
                    ok('#http-result').text('Error: ' + error.message);
                });
        });

        ok('#post-request').click(function() {
            ok.http.post('https://jsonplaceholder.typicode.com/posts', {
                title: 'OneKit Demo',
                body: 'This is a test post',
                userId: 1
            })
            .then(data => {
                ok('#http-result').html('<pre>' + JSON.stringify(data, null, 2) + '</pre>');
            })
            .catch(error => {
                ok('#http-result').text('Error: ' + error.message);
            });
        });

        ok('#put-request').click(function() {
            ok.http.put('https://jsonplaceholder.typicode.com/posts/1', {
                id: 1,
                title: 'Updated Title',
                body: 'Updated body',
                userId: 1
            })
            .then(data => {
                ok('#http-result').html('<pre>' + JSON.stringify(data, null, 2) + '</pre>');
            })
            .catch(error => {
                ok('#http-result').text('Error: ' + error.message);
            });
        });

        ok('#delete-request').click(function() {
            ok.http.delete('https://jsonplaceholder.typicode.com/posts/1')
                .then(data => {
                    ok('#http-result').text('Delete successful');
                })
                .catch(error => {
                    ok('#http-result').text('Error: ' + error.message);
                });
        });

        // WebSocket (mock example - would need a real WS server)
        let ws = null;

        ok('#connect-ws').click(function() {
            // Note: This is a mock - real WebSocket would need a server
            ok('#ws-status').text('Status: Connected (mock)');
            ok('#ws-result').text('WebSocket connected');
        });

        ok('#send-ws').click(function() {
            if (ws) {
                ws.send({ message: 'Hello from OneKit!' });
                ok('#ws-result').text('Message sent');
            } else {
                ok('#ws-result').text('WebSocket not connected');
            }
        });

        ok('#disconnect-ws').click(function() {
            if (ws) {
                ws.close();
                ws = null;
            }
            ok('#ws-status').text('Status: Disconnected');
            ok('#ws-result').text('WebSocket disconnected');
        });
    </script>
</body>
</html>
